/******************************************************************************
 ** Copyright (c) 
 ** File Name:        sensor_ov5640.c                                           *
 ** Author:                                                       *
 ** DATE:                                                              *
 ** Description:   This file contains driver for sensor OV2640. 
 **                                                          
 ******************************************************************************

 ******************************************************************************
 **                        Edit History                                       *
 ** ------------------------------------------------------------------------- *
 ** DATE           NAME             DESCRIPTION                               *
 **       
 ******************************************************************************/

/**---------------------------------------------------------------------------*
 **                         Dependencies                                      *
 **---------------------------------------------------------------------------*/
#include "ms_customize_trc.h"
#include "sensor_cfg.h"
#include "sensor_drv.h"
#include "i2c_api.h"
#include "os_api.h"
#include "chip.h"
#include "dal_dcamera.h"
/*lint -save -e765 */
/**--------------------------------------------------------------------------*
 **                         Compiler Flag                                      *
 **---------------------------------------------------------------------------*/
#ifdef     __cplusplus
extern     "C" 
{
#endif
/**---------------------------------------------------------------------------*
 **                     Extern Function Declaration                           *
 **---------------------------------------------------------------------------*/
//extern uint32 OS_TickDelay(uint32 ticks);

/**---------------------------------------------------------------------------*
 **                         Const variables                                   *
 **---------------------------------------------------------------------------*/

/**---------------------------------------------------------------------------*
 **                            Macro Define
 **---------------------------------------------------------------------------*/
#define ov5640_I2C_ADDR_W        0x78
#define ov5640_I2C_ADDR_R        0x79

#define FOCUS_ZONE_W 80
#define FOCUS_ZONE_H 60

#define EXPOSURE_ZONE_W 1280
#define EXPOSURE_ZONE_H 960

#define CMD_MAIN 0x3022
#define CMD_ACK 0x3023
#define CMD_PARAM0 0x3024
#define CMD_PARAM1 0x3025
#define CMD_PARAM4 0x3028
 
/**---------------------------------------------------------------------------*
 **                     Local Function Prototypes                              *
 **---------------------------------------------------------------------------*/
LOCAL uint32 _ov5640_InitExifInfo(void);
LOCAL uint32 _ov5640_GetResolutionTrimTab(uint32 param);
LOCAL uint32 _ov5640_PowerOn(uint32 power_on);
LOCAL uint32 _ov5640_Identify(uint32 param);
LOCAL uint32 _ov5640_set_brightness(uint32 level);
LOCAL uint32 _ov5640_set_contrast(uint32 level);
LOCAL uint32 _ov5640_set_sharpness(uint32 level);
LOCAL uint32 _ov5640_set_saturation(uint32 level);
LOCAL uint32 _ov5640_set_image_effect(uint32 effect_type);
LOCAL uint32 _ov5640_set_ev(uint32 level); 
LOCAL uint32 _ov5640_set_anti_flicker(uint32 mode);
LOCAL uint32 _ov5640_set_video_mode(uint32 mode);
LOCAL uint32 _ov5640_set_awb(uint32 mode);
LOCAL uint32 _ov5640_set_work_mode(uint32 mode);
LOCAL uint32 _ov5640_BeforeSnapshot(uint32 param);
LOCAL uint32 _ov5640_check_image_format_support(uint32 param); 
LOCAL uint32 _ov5640_pick_out_jpeg_stream(uint32 param);
LOCAL uint32 _ov5640_chang_image_format(uint32 param);
LOCAL uint32 _ov5640_after_snapshot(uint32 param);
LOCAL uint32 _ov5640_GetExifInfo(uint32 param);
LOCAL uint32 _ov5640_ExtFunc(uint32 ctl_param);

__align(4) LOCAL const uint8 ov5640_af_firmware[] =
{
    0x02,
    0x0b,
    0x5f,
    0x02,
    0x07,
    0xb9,
    0xc2,
    0x01,
    0x22,
    0x22,
    0x00,
    0x02,
    0x0b,
    0x49,
    0xe5,
    0x40,
    0x60,
    0x03,
    0x02,
    0x00,
    0x97,
    0xf5,
    0x3f,
    0xd2,
    0x34,
    0x75,
    0x29,
    0xff,
    0x75,
    0x2a,
    0x0e,
    0x75,
    0x2b,
    0x55,
    0x75,
    0x2c,
    0x01,
    0x12,
    0x0a,
    0x3c,
    0xe4,
    0xff,
    0xef,
    0x25,
    0xe0,
    0x24,
    0x41,
    0xf8,
    0xe4,
    0xf6,
    0x08,
    0xf6,
    0x0f,
    0xbf,
    0x34,
    0xf2,
    0x90,
    0x0e,
    0x88,
    0xe4,
    0x93,
    0xff,
    0xe5,
    0x3e,
    0xc3,
    0x9f,
    0x50,
    0x04,
    0x7f,
    0x05,
    0x80,
    0x02,
    0x7f,
    0xfb,
    0x78,
    0xb0,
    0xa6,
    0x07,
    0x12,
    0x0a,
    0xa6,
    0x40,
    0x04,
    0x7f,
    0x03,
    0x80,
    0x02,
    0x7f,
    0x30,
    0x78,
    0xaf,
    0xa6,
    0x07,
    0xe6,
    0x18,
    0xf6,
    0x08,
    0xe6,
    0x78,
    0xac,
    0xf6,
    0x78,
    0xaf,
    0xe6,
    0x78,
    0xad,
    0xf6,
    0x78,
    0xb2,
    0x76,
    0x33,
    0xe4,
    0x08,
    0xf6,
    0x78,
    0xab,
    0x76,
    0x01,
    0x75,
    0x3d,
    0x02,
    0x78,
    0xa9,
    0xf6,
    0x08,
    0xf6,
    0x74,
    0xff,
    0x78,
    0xb4,
    0xf6,
    0x08,
    0xf6,
    0x75,
    0x40,
    0x01,
    0x78,
    0xaf,
    0xe6,
    0x75,
    0xf0,
    0x05,
    0xa4,
    0xf5,
    0x3e,
    0x12,
    0x08,
    0x4d,
    0xc2,
    0x36,
    0x22,
    0x78,
    0xab,
    0xe6,
    0xd3,
    0x94,
    0x00,
    0x40,
    0x02,
    0x16,
    0x22,
    0xe5,
    0x40,
    0x64,
    0x05,
    0x70,
    0x28,
    0xf5,
    0x40,
    0xc2,
    0x01,
    0x78,
    0xac,
    0xe6,
    0x25,
    0xe0,
    0x24,
    0x41,
    0xf8,
    0xe6,
    0xfe,
    0x08,
    0xe6,
    0xff,
    0x78,
    0x41,
    0xa6,
    0x06,
    0x08,
    0xa6,
    0x07,
    0xa2,
    0x36,
    0xe4,
    0x33,
    0xf5,
    0x31,
    0x90,
    0x30,
    0x28,
    0xf0,
    0x75,
    0x3f,
    0x10,
    0xd2,
    0x34,
    0x22,
    0xe5,
    0x3e,
    0x75,
    0xf0,
    0x05,
    0x84,
    0x78,
    0xaf,
    0xf6,
    0x90,
    0x0e,
    0x85,
    0xe4,
    0x93,
    0xff,
    0x25,
    0xe0,
    0x24,
    0x0a,
    0xf8,
    0xe6,
    0xfc,
    0x08,
    0xe6,
    0xfd,
    0x78,
    0xaf,
    0xe6,
    0x25,
    0xe0,
    0x24,
    0x41,
    0xf8,
    0xa6,
    0x04,
    0x08,
    0xa6,
    0x05,
    0xef,
    0x12,
    0x0a,
    0xad,
    0xd3,
    0x78,
    0xaa,
    0x96,
    0xee,
    0x18,
    0x96,
    0x40,
    0x0d,
    0x78,
    0xaf,
    0xe6,
    0x78,
    0xac,
    0xf6,
    0x78,
    0xa9,
    0xa6,
    0x06,
    0x08,
    0xa6,
    0x07,
    0x90,
    0x0e,
    0x85,
    0xe4,
    0x93,
    0x12,
    0x0a,
    0xad,
    0xc3,
    0x78,
    0xb5,
    0x96,
    0xee,
    0x18,
    0x96,
    0x50,
    0x0d,
    0x78,
    0xaf,
    0xe6,
    0x78,
    0xad,
    0xf6,
    0x78,
    0xb4,
    0xa6,
    0x06,
    0x08,
    0xa6,
    0x07,
    0x78,
    0xa9,
    0xe6,
    0xfe,
    0x08,
    0xe6,
    0xc3,
    0x78,
    0xb5,
    0x96,
    0xff,
    0xee,
    0x18,
    0x96,
    0x78,
    0xb6,
    0xf6,
    0x08,
    0xa6,
    0x07,
    0x90,
    0x0e,
    0x8a,
    0xe4,
    0x18,
    0x12,
    0x0a,
    0x8b,
    0x40,
    0x02,
    0xd2,
    0x36,
    0x78,
    0xaf,
    0xe6,
    0x08,
    0x26,
    0x08,
    0xf6,
    0xe5,
    0x40,
    0x64,
    0x01,
    0x70,
    0x55,
    0xe6,
    0xc3,
    0x78,
    0xb3,
    0x12,
    0x0a,
    0x81,
    0x40,
    0x10,
    0x12,
    0x0a,
    0x7c,
    0x50,
    0x0b,
    0x30,
    0x36,
    0x41,
    0x78,
    0xaf,
    0xe6,
    0x78,
    0xac,
    0x66,
    0x60,
    0x39,
    0x12,
    0x0a,
    0xa4,
    0x40,
    0x04,
    0x7f,
    0xfe,
    0x80,
    0x02,
    0x7f,
    0x02,
    0x78,
    0xb0,
    0xa6,
    0x07,
    0x78,
    0xac,
    0xe6,
    0x24,
    0x03,
    0x78,
    0xb2,
    0xf6,
    0x78,
    0xac,
    0xe6,
    0x24,
    0xfd,
    0x78,
    0xb3,
    0xf6,
    0x12,
    0x0a,
    0xa4,
    0x40,
    0x06,
    0x78,
    0xb3,
    0xe6,
    0xff,
    0x80,
    0x04,
    0x78,
    0xb2,
    0xe6,
    0xff,
    0x78,
    0xb1,
    0xa6,
    0x07,
    0x75,
    0x40,
    0x02,
    0x78,
    0xab,
    0x76,
    0x01,
    0x02,
    0x02,
    0x6e,
    0xe5,
    0x40,
    0x64,
    0x02,
    0x60,
    0x03,
    0x02,
    0x02,
    0x4e,
    0x78,
    0xb1,
    0xe6,
    0xff,
    0xc3,
    0x78,
    0xb3,
    0x12,
    0x0a,
    0x82,
    0x40,
    0x08,
    0x12,
    0x0a,
    0x7c,
    0x50,
    0x03,
    0x02,
    0x02,
    0x4c,
    0x12,
    0x0a,
    0xa4,
    0x40,
    0x04,
    0x7f,
    0xff,
    0x80,
    0x02,
    0x7f,
    0x01,
    0x78,
    0xb0,
    0xa6,
    0x07,
    0x78,
    0xac,
    0xe6,
    0x04,
    0x78,
    0xb2,
    0xf6,
    0x78,
    0xac,
    0xe6,
    0x14,
    0x78,
    0xb3,
    0xf6,
    0x18,
    0x12,
    0x0a,
    0xa6,
    0x40,
    0x04,
    0xe6,
    0xff,
    0x80,
    0x02,
    0x7f,
    0x00,
    0x78,
    0xb2,
    0xa6,
    0x07,
    0xd3,
    0x08,
    0xe6,
    0x64,
    0x80,
    0x94,
    0x80,
    0x40,
    0x04,
    0xe6,
    0xff,
    0x80,
    0x02,
    0x7f,
    0x00,
    0x78,
    0xb3,
    0xa6,
    0x07,
    0xc3,
    0x18,
    0xe6,
    0x64,
    0x80,
    0x94,
    0xb3,
    0x50,
    0x04,
    0xe6,
    0xff,
    0x80,
    0x02,
    0x7f,
    0x33,
    0x78,
    0xb2,
    0xa6,
    0x07,
    0xc3,
    0x08,
    0xe6,
    0x64,
    0x80,
    0x94,
    0xb3,
    0x50,
    0x04,
    0xe6,
    0xff,
    0x80,
    0x02,
    0x7f,
    0x33,
    0x78,
    0xb3,
    0xa6,
    0x07,
    0x12,
    0x0a,
    0xa4,
    0x40,
    0x06,
    0x78,
    0xb3,
    0xe6,
    0xff,
    0x80,
    0x04,
    0x78,
    0xb2,
    0xe6,
    0xff,
    0x78,
    0xb1,
    0xa6,
    0x07,
    0x75,
    0x40,
    0x03,
    0x78,
    0xab,
    0x76,
    0x01,
    0x80,
    0x20,
    0xe5,
    0x40,
    0x64,
    0x03,
    0x70,
    0x26,
    0x78,
    0xb1,
    0xe6,
    0xff,
    0xc3,
    0x78,
    0xb3,
    0x12,
    0x0a,
    0x82,
    0x40,
    0x05,
    0x12,
    0x0a,
    0x7c,
    0x40,
    0x09,
    0x78,
    0xac,
    0xe6,
    0x78,
    0xb1,
    0xf6,
    0x75,
    0x40,
    0x04,
    0x78,
    0xb1,
    0xe6,
    0x75,
    0xf0,
    0x05,
    0xa4,
    0xf5,
    0x3e,
    0x02,
    0x08,
    0x4d,
    0xe5,
    0x40,
    0xb4,
    0x04,
    0x1f,
    0x90,
    0x0e,
    0x89,
    0xe4,
    0x78,
    0xb6,
    0x12,
    0x0a,
    0x8b,
    0x40,
    0x02,
    0xd2,
    0x36,
    0x75,
    0x40,
    0x05,
    0x75,
    0x29,
    0xff,
    0x75,
    0x2a,
    0x0e,
    0x75,
    0x2b,
    0x59,
    0x75,
    0x2c,
    0x01,
    0x12,
    0x0a,
    0x3c,
    0x22,
    0xef,
    0x8d,
    0xf0,
    0xa4,
    0xa8,
    0xf0,
    0xcf,
    0x8c,
    0xf0,
    0xa4,
    0x28,
    0xce,
    0x8d,
    0xf0,
    0xa4,
    0x2e,
    0xfe,
    0x22,
    0xbc,
    0x00,
    0x0b,
    0xbe,
    0x00,
    0x29,
    0xef,
    0x8d,
    0xf0,
    0x84,
    0xff,
    0xad,
    0xf0,
    0x22,
    0xe4,
    0xcc,
    0xf8,
    0x75,
    0xf0,
    0x08,
    0xef,
    0x2f,
    0xff,
    0xee,
    0x33,
    0xfe,
    0xec,
    0x33,
    0xfc,
    0xee,
    0x9d,
    0xec,
    0x98,
    0x40,
    0x05,
    0xfc,
    0xee,
    0x9d,
    0xfe,
    0x0f,
    0xd5,
    0xf0,
    0xe9,
    0xe4,
    0xce,
    0xfd,
    0x22,
    0xed,
    0xf8,
    0xf5,
    0xf0,
    0xee,
    0x84,
    0x20,
    0xd2,
    0x1c,
    0xfe,
    0xad,
    0xf0,
    0x75,
    0xf0,
    0x08,
    0xef,
    0x2f,
    0xff,
    0xed,
    0x33,
    0xfd,
    0x40,
    0x07,
    0x98,
    0x50,
    0x06,
    0xd5,
    0xf0,
    0xf2,
    0x22,
    0xc3,
    0x98,
    0xfd,
    0x0f,
    0xd5,
    0xf0,
    0xea,
    0x22,
    0xe8,
    0x8f,
    0xf0,
    0xa4,
    0xcc,
    0x8b,
    0xf0,
    0xa4,
    0x2c,
    0xfc,
    0xe9,
    0x8e,
    0xf0,
    0xa4,
    0x2c,
    0xfc,
    0x8a,
    0xf0,
    0xed,
    0xa4,
    0x2c,
    0xfc,
    0xea,
    0x8e,
    0xf0,
    0xa4,
    0xcd,
    0xa8,
    0xf0,
    0x8b,
    0xf0,
    0xa4,
    0x2d,
    0xcc,
    0x38,
    0x25,
    0xf0,
    0xfd,
    0xe9,
    0x8f,
    0xf0,
    0xa4,
    0x2c,
    0xcd,
    0x35,
    0xf0,
    0xfc,
    0xeb,
    0x8e,
    0xf0,
    0xa4,
    0xfe,
    0xa9,
    0xf0,
    0xeb,
    0x8f,
    0xf0,
    0xa4,
    0xcf,
    0xc5,
    0xf0,
    0x2e,
    0xcd,
    0x39,
    0xfe,
    0xe4,
    0x3c,
    0xfc,
    0xea,
    0xa4,
    0x2d,
    0xce,
    0x35,
    0xf0,
    0xfd,
    0xe4,
    0x3c,
    0xfc,
    0x22,
    0x75,
    0xf0,
    0x08,
    0x75,
    0x82,
    0x00,
    0xef,
    0x2f,
    0xff,
    0xee,
    0x33,
    0xfe,
    0xcd,
    0x33,
    0xcd,
    0xcc,
    0x33,
    0xcc,
    0xc5,
    0x82,
    0x33,
    0xc5,
    0x82,
    0x9b,
    0xed,
    0x9a,
    0xec,
    0x99,
    0xe5,
    0x82,
    0x98,
    0x40,
    0x0c,
    0xf5,
    0x82,
    0xee,
    0x9b,
    0xfe,
    0xed,
    0x9a,
    0xfd,
    0xec,
    0x99,
    0xfc,
    0x0f,
    0xd5,
    0xf0,
    0xd6,
    0xe4,
    0xce,
    0xfb,
    0xe4,
    0xcd,
    0xfa,
    0xe4,
    0xcc,
    0xf9,
    0xa8,
    0x82,
    0x22,
    0xb8,
    0x00,
    0xc1,
    0xb9,
    0x00,
    0x59,
    0xba,
    0x00,
    0x2d,
    0xec,
    0x8b,
    0xf0,
    0x84,
    0xcf,
    0xce,
    0xcd,
    0xfc,
    0xe5,
    0xf0,
    0xcb,
    0xf9,
    0x78,
    0x18,
    0xef,
    0x2f,
    0xff,
    0xee,
    0x33,
    0xfe,
    0xed,
    0x33,
    0xfd,
    0xec,
    0x33,
    0xfc,
    0xeb,
    0x33,
    0xfb,
    0x10,
    0xd7,
    0x03,
    0x99,
    0x40,
    0x04,
    0xeb,
    0x99,
    0xfb,
    0x0f,
    0xd8,
    0xe5,
    0xe4,
    0xf9,
    0xfa,
    0x22,
    0x78,
    0x18,
    0xef,
    0x2f,
    0xff,
    0xee,
    0x33,
    0xfe,
    0xed,
    0x33,
    0xfd,
    0xec,
    0x33,
    0xfc,
    0xc9,
    0x33,
    0xc9,
    0x10,
    0xd7,
    0x05,
    0x9b,
    0xe9,
    0x9a,
    0x40,
    0x07,
    0xec,
    0x9b,
    0xfc,
    0xe9,
    0x9a,
    0xf9,
    0x0f,
    0xd8,
    0xe0,
    0xe4,
    0xc9,
    0xfa,
    0xe4,
    0xcc,
    0xfb,
    0x22,
    0x75,
    0xf0,
    0x10,
    0xef,
    0x2f,
    0xff,
    0xee,
    0x33,
    0xfe,
    0xed,
    0x33,
    0xfd,
    0xcc,
    0x33,
    0xcc,
    0xc8,
    0x33,
    0xc8,
    0x10,
    0xd7,
    0x07,
    0x9b,
    0xec,
    0x9a,
    0xe8,
    0x99,
    0x40,
    0x0a,
    0xed,
    0x9b,
    0xfd,
    0xec,
    0x9a,
    0xfc,
    0xe8,
    0x99,
    0xf8,
    0x0f,
    0xd5,
    0xf0,
    0xda,
    0xe4,
    0xcd,
    0xfb,
    0xe4,
    0xcc,
    0xfa,
    0xe4,
    0xc8,
    0xf9,
    0x22,
    0xeb,
    0x9f,
    0xf5,
    0xf0,
    0xea,
    0x9e,
    0x42,
    0xf0,
    0xe9,
    0x9d,
    0x42,
    0xf0,
    0xe8,
    0x9c,
    0x45,
    0xf0,
    0x22,
    0xe8,
    0x60,
    0x0f,
    0xef,
    0xc3,
    0x33,
    0xff,
    0xee,
    0x33,
    0xfe,
    0xed,
    0x33,
    0xfd,
    0xec,
    0x33,
    0xfc,
    0xd8,
    0xf1,
    0x22,
    0xe4,
    0x93,
    0xfc,
    0x74,
    0x01,
    0x93,
    0xfd,
    0x74,
    0x02,
    0x93,
    0xfe,
    0x74,
    0x03,
    0x93,
    0xff,
    0x22,
    0xe6,
    0xfb,
    0x08,
    0xe6,
    0xf9,
    0x08,
    0xe6,
    0xfa,
    0x08,
    0xe6,
    0xcb,
    0xf8,
    0x22,
    0xec,
    0xf6,
    0x08,
    0xed,
    0xf6,
    0x08,
    0xee,
    0xf6,
    0x08,
    0xef,
    0xf6,
    0x22,
    0xa4,
    0x25,
    0x82,
    0xf5,
    0x82,
    0xe5,
    0xf0,
    0x35,
    0x83,
    0xf5,
    0x83,
    0x22,
    0xd0,
    0x83,
    0xd0,
    0x82,
    0xf8,
    0xe4,
    0x93,
    0x70,
    0x12,
    0x74,
    0x01,
    0x93,
    0x70,
    0x0d,
    0xa3,
    0xa3,
    0x93,
    0xf8,
    0x74,
    0x01,
    0x93,
    0xf5,
    0x82,
    0x88,
    0x83,
    0xe4,
    0x73,
    0x74,
    0x02,
    0x93,
    0x68,
    0x60,
    0xef,
    0xa3,
    0xa3,
    0xa3,
    0x80,
    0xdf,
    0x90,
    0x38,
    0x04,
    0x78,
    0x45,
    0x12,
    0x09,
    0x42,
    0x90,
    0x38,
    0x00,
    0xe0,
    0xfe,
    0xa3,
    0xe0,
    0xfd,
    0xed,
    0xff,
    0xc3,
    0x12,
    0x08,
    0xfb,
    0x90,
    0x38,
    0x10,
    0x12,
    0x08,
    0xef,
    0x90,
    0x38,
    0x06,
    0x78,
    0x47,
    0x12,
    0x09,
    0x42,
    0x90,
    0x38,
    0x02,
    0xe0,
    0xfe,
    0xa3,
    0xe0,
    0xfd,
    0xed,
    0xff,
    0xc3,
    0x12,
    0x08,
    0xfb,
    0x90,
    0x38,
    0x12,
    0x12,
    0x08,
    0xef,
    0xa3,
    0xe0,
    0xb4,
    0x31,
    0x07,
    0x78,
    0x45,
    0x79,
    0x45,
    0x12,
    0x09,
    0x58,
    0x90,
    0x38,
    0x14,
    0xe0,
    0xb4,
    0x71,
    0x15,
    0x78,
    0x45,
    0xe6,
    0xfe,
    0x08,
    0xe6,
    0x78,
    0x02,
    0xce,
    0xc3,
    0x13,
    0xce,
    0x13,
    0xd8,
    0xf9,
    0x79,
    0x46,
    0xf7,
    0xee,
    0x19,
    0xf7,
    0x90,
    0x38,
    0x15,
    0xe0,
    0xb4,
    0x31,
    0x07,
    0x78,
    0x47,
    0x79,
    0x47,
    0x12,
    0x09,
    0x58,
    0x90,
    0x38,
    0x15,
    0xe0,
    0xb4,
    0x71,
    0x15,
    0x78,
    0x47,
    0xe6,
    0xfe,
    0x08,
    0xe6,
    0x78,
    0x02,
    0xce,
    0xc3,
    0x13,
    0xce,
    0x13,
    0xd8,
    0xf9,
    0x79,
    0x48,
    0xf7,
    0xee,
    0x19,
    0xf7,
    0x79,
    0x45,
    0x12,
    0x09,
    0x2a,
    0x09,
    0x12,
    0x09,
    0x2a,
    0xaf,
    0x3a,
    0x12,
    0x08,
    0xe0,
    0x7d,
    0x50,
    0x12,
    0x02,
    0xb1,
    0x78,
    0x4d,
    0xa6,
    0x06,
    0x08,
    0xa6,
    0x07,
    0xaf,
    0x38,
    0x12,
    0x08,
    0xe0,
    0x7d,
    0x50,
    0x12,
    0x02,
    0xb1,
    0x78,
    0x49,
    0xa6,
    0x06,
    0x08,
    0xa6,
    0x07,
    0xaf,
    0x3b,
    0x78,
    0x47,
    0x12,
    0x08,
    0xe2,
    0x7d,
    0x3c,
    0x12,
    0x02,
    0xb1,
    0x78,
    0x4f,
    0xa6,
    0x06,
    0x08,
    0xa6,
    0x07,
    0xaf,
    0x39,
    0x7e,
    0x00,
    0x78,
    0x47,
    0x12,
    0x08,
    0xe4,
    0x7d,
    0x3c,
    0x12,
    0x02,
    0xb1,
    0x78,
    0x4b,
    0xa6,
    0x06,
    0x08,
    0xa6,
    0x07,
    0xc3,
    0x78,
    0x4e,
    0xe6,
    0x94,
    0x08,
    0x18,
    0xe6,
    0x94,
    0x00,
    0x50,
    0x05,
    0x76,
    0x00,
    0x08,
    0x76,
    0x08,
    0xc3,
    0x78,
    0x50,
    0xe6,
    0x94,
    0x08,
    0x18,
    0xe6,
    0x94,
    0x00,
    0x50,
    0x05,
    0x76,
    0x00,
    0x08,
    0x76,
    0x08,
    0x78,
    0x4d,
    0x12,
    0x09,
    0x17,
    0xff,
    0xd3,
    0x78,
    0x4a,
    0xe6,
    0x9f,
    0x18,
    0xe6,
    0x9e,
    0x40,
    0x0e,
    0x78,
    0x4d,
    0xe6,
    0x13,
    0xfe,
    0x08,
    0xe6,
    0x78,
    0x4a,
    0x12,
    0x09,
    0x4d,
    0x80,
    0x04,
    0x7e,
    0x00,
    0x7f,
    0x00,
    0x78,
    0x51,
    0x12,
    0x09,
    0x0f,
    0xff,
    0xd3,
    0x78,
    0x4c,
    0xe6,
    0x9f,
    0x18,
    0xe6,
    0x9e,
    0x40,
    0x0e,
    0x78,
    0x4f,
    0xe6,
    0x13,
    0xfe,
    0x08,
    0xe6,
    0x78,
    0x4c,
    0x12,
    0x09,
    0x4d,
    0x80,
    0x04,
    0x7e,
    0x00,
    0x7f,
    0x00,
    0xe4,
    0xfc,
    0xfd,
    0x78,
    0x55,
    0x12,
    0x04,
    0x64,
    0x78,
    0x4d,
    0x12,
    0x09,
    0x17,
    0x78,
    0x4a,
    0x26,
    0xff,
    0xee,
    0x18,
    0x36,
    0xfe,
    0x78,
    0x59,
    0x12,
    0x09,
    0x0f,
    0x78,
    0x4c,
    0x26,
    0xff,
    0xee,
    0x18,
    0x36,
    0xfe,
    0xe4,
    0xfc,
    0xfd,
    0x78,
    0x5d,
    0x12,
    0x04,
    0x64,
    0x12,
    0x09,
    0x1f,
    0x78,
    0x59,
    0x12,
    0x04,
    0x57,
    0xd3,
    0x12,
    0x04,
    0x23,
    0x40,
    0x08,
    0x12,
    0x09,
    0x1f,
    0x78,
    0x59,
    0x12,
    0x04,
    0x64,
    0x78,
    0x47,
    0x12,
    0x09,
    0x21,
    0x78,
    0x5d,
    0x12,
    0x04,
    0x57,
    0xd3,
    0x12,
    0x04,
    0x23,
    0x40,
    0x0a,
    0x78,
    0x47,
    0x12,
    0x09,
    0x21,
    0x78,
    0x5d,
    0x12,
    0x04,
    0x64,
    0xe4,
    0xfd,
    0x78,
    0x54,
    0x12,
    0x09,
    0x3a,
    0x24,
    0x01,
    0x12,
    0x09,
    0x03,
    0x78,
    0x58,
    0x12,
    0x09,
    0x3a,
    0x24,
    0x02,
    0x12,
    0x09,
    0x03,
    0x78,
    0x5c,
    0x12,
    0x09,
    0x3a,
    0x24,
    0x03,
    0x12,
    0x09,
    0x03,
    0x78,
    0x60,
    0x12,
    0x09,
    0x3a,
    0x24,
    0x04,
    0x12,
    0x09,
    0x03,
    0x0d,
    0xbd,
    0x05,
    0xd4,
    0xc2,
    0x0e,
    0xc2,
    0x06,
    0x22,
    0x85,
    0x08,
    0x36,
    0x90,
    0x30,
    0x24,
    0xe0,
    0xf5,
    0x32,
    0xa3,
    0xe0,
    0xf5,
    0x33,
    0xa3,
    0xe0,
    0xf5,
    0x34,
    0xa3,
    0xe0,
    0xf5,
    0x35,
    0xa3,
    0xe0,
    0xf5,
    0x31,
    0xd2,
    0x33,
    0xe5,
    0x36,
    0x12,
    0x04,
    0x7c,
    0x06,
    0xcc,
    0x03,
    0x06,
    0xd0,
    0x04,
    0x06,
    0xd6,
    0x07,
    0x06,
    0xdf,
    0x08,
    0x07,
    0x05,
    0x18,
    0x07,
    0x1b,
    0x19,
    0x06,
    0xf0,
    0x1a,
    0x06,
    0xfc,
    0x1b,
    0x07,
    0x3f,
    0x80,
    0x07,
    0x42,
    0x81,
    0x07,
    0x9d,
    0x8f,
    0x07,
    0x8c,
    0x90,
    0x07,
    0x9d,
    0x91,
    0x07,
    0x9d,
    0x92,
    0x07,
    0x9d,
    0x93,
    0x07,
    0x9d,
    0x94,
    0x07,
    0x9d,
    0x98,
    0x07,
    0x9a,
    0x9f,
    0x00,
    0x00,
    0x07,
    0xb8,
    0x12,
    0x0a,
    0xe6,
    0x22,
    0x12,
    0x0a,
    0xe6,
    0xd2,
    0x03,
    0x22,
    0xa2,
    0x36,
    0xe4,
    0x33,
    0xf5,
    0x31,
    0x02,
    0x07,
    0x9d,
    0xc2,
    0x01,
    0xc2,
    0x02,
    0xc2,
    0x03,
    0x12,
    0x09,
    0x62,
    0x75,
    0x3f,
    0x70,
    0xd2,
    0x34,
    0x02,
    0x07,
    0x9d,
    0x85,
    0x35,
    0x3d,
    0x85,
    0x31,
    0x3e,
    0x12,
    0x08,
    0x4d,
    0x02,
    0x07,
    0x9d,
    0x85,
    0x3d,
    0x35,
    0x85,
    0x3e,
    0x31,
    0x02,
    0x07,
    0x9d,
    0xe4,
    0xf5,
    0x22,
    0xf5,
    0x23,
    0x85,
    0x35,
    0x1e,
    0x85,
    0x34,
    0x1d,
    0x85,
    0x33,
    0x1c,
    0x85,
    0x32,
    0x1b,
    0x12,
    0x0a,
    0xb8,
    0x80,
    0x1f,
    0x75,
    0x22,
    0x00,
    0x75,
    0x23,
    0x01,
    0x74,
    0xff,
    0xf5,
    0x1a,
    0xf5,
    0x19,
    0xf5,
    0x18,
    0xf5,
    0x17,
    0x12,
    0x0a,
    0xb8,
    0x85,
    0x1a,
    0x35,
    0x85,
    0x19,
    0x34,
    0x85,
    0x18,
    0x33,
    0x85,
    0x17,
    0x32,
    0xe4,
    0xf5,
    0x31,
    0x80,
    0x5e,
    0x02,
    0x0b,
    0x2f,
    0x85,
    0x32,
    0x38,
    0x85,
    0x33,
    0x39,
    0xe5,
    0x3a,
    0xc3,
    0x13,
    0xff,
    0xe5,
    0x38,
    0xc3,
    0x9f,
    0x50,
    0x02,
    0x8f,
    0x38,
    0xe5,
    0x3b,
    0xc3,
    0x13,
    0xff,
    0xe5,
    0x39,
    0xc3,
    0x9f,
    0x50,
    0x02,
    0x8f,
    0x39,
    0xe5,
    0x3a,
    0xc3,
    0x13,
    0xff,
    0xfd,
    0xe5,
    0x38,
    0x90,
    0x0e,
    0x7f,
    0x12,
    0x0b,
    0x02,
    0x40,
    0x04,
    0xee,
    0x9f,
    0xf5,
    0x38,
    0xe5,
    0x3b,
    0xc3,
    0x13,
    0xff,
    0xfd,
    0xe5,
    0x39,
    0x90,
    0x0e,
    0x80,
    0x12,
    0x0b,
    0x02,
    0x40,
    0x14,
    0xee,
    0x9f,
    0xf5,
    0x39,
    0x80,
    0x0e,
    0x85,
    0x35,
    0x3b,
    0x85,
    0x34,
    0x3a,
    0x85,
    0x33,
    0x39,
    0x85,
    0x32,
    0x38,
    0x80,
    0x03,
    0x02,
    0x04,
    0xa2,
    0x90,
    0x30,
    0x24,
    0xe5,
    0x32,
    0xf0,
    0xa3,
    0xe5,
    0x33,
    0xf0,
    0xa3,
    0xe5,
    0x34,
    0xf0,
    0xa3,
    0xe5,
    0x35,
    0xf0,
    0xa3,
    0xe5,
    0x31,
    0xf0,
    0x90,
    0x30,
    0x23,
    0xe4,
    0xf0,
    0x22,
    0xc0,
    0xe0,
    0xc0,
    0x83,
    0xc0,
    0x82,
    0xc0,
    0xd0,
    0x90,
    0x3f,
    0x0c,
    0xe0,
    0xf5,
    0x27,
    0xe5,
    0x27,
    0x30,
    0xe3,
    0x42,
    0x30,
    0x35,
    0x34,
    0x90,
    0x60,
    0x19,
    0xe0,
    0xf5,
    0x0a,
    0xa3,
    0xe0,
    0xf5,
    0x0b,
    0x30,
    0x01,
    0x06,
    0x30,
    0x32,
    0x03,
    0xd3,
    0x80,
    0x01,
    0xc3,
    0x92,
    0x09,
    0x30,
    0x02,
    0x06,
    0x30,
    0x32,
    0x03,
    0xd3,
    0x80,
    0x01,
    0xc3,
    0x92,
    0x0a,
    0x30,
    0x32,
    0x0c,
    0x30,
    0x03,
    0x09,
    0x20,
    0x02,
    0x06,
    0x20,
    0x01,
    0x03,
    0xd3,
    0x80,
    0x01,
    0xc3,
    0x92,
    0x0b,
    0x90,
    0x30,
    0x01,
    0xe0,
    0x44,
    0x40,
    0xf0,
    0xe0,
    0x54,
    0xbf,
    0xf0,
    0xe5,
    0x27,
    0x30,
    0xe1,
    0x14,
    0x30,
    0x33,
    0x11,
    0x90,
    0x30,
    0x22,
    0xe0,
    0xf5,
    0x08,
    0xe4,
    0xf0,
    0x30,
    0x00,
    0x03,
    0xd3,
    0x80,
    0x01,
    0xc3,
    0x92,
    0x08,
    0xe5,
    0x27,
    0x30,
    0xe5,
    0x12,
    0x90,
    0x56,
    0x90,
    0xe0,
    0xf5,
    0x09,
    0x30,
    0x30,
    0x09,
    0x30,
    0x05,
    0x03,
    0xd3,
    0x80,
    0x01,
    0xc3,
    0x92,
    0x0d,
    0x90,
    0x3f,
    0x0c,
    0xe5,
    0x27,
    0xf0,
    0xd0,
    0xd0,
    0xd0,
    0x82,
    0xd0,
    0x83,
    0xd0,
    0xe0,
    0x32,
    0x90,
    0x0e,
    0x7d,
    0xe4,
    0x93,
    0xfe,
    0x74,
    0x01,
    0x93,
    0xff,
    0xc3,
    0x90,
    0x0e,
    0x7b,
    0x74,
    0x01,
    0x93,
    0x9f,
    0xff,
    0xe4,
    0x93,
    0x9e,
    0xfe,
    0xe4,
    0x8f,
    0x30,
    0x8e,
    0x2f,
    0xf5,
    0x2e,
    0xf5,
    0x2d,
    0xab,
    0x30,
    0xaa,
    0x2f,
    0xa9,
    0x2e,
    0xa8,
    0x2d,
    0xaf,
    0x3e,
    0xfc,
    0xfd,
    0xfe,
    0x12,
    0x03,
    0x06,
    0x12,
    0x0b,
    0x14,
    0xe4,
    0x7b,
    0xff,
    0xfa,
    0xf9,
    0xf8,
    0x12,
    0x03,
    0x91,
    0x12,
    0x0b,
    0x14,
    0x90,
    0x0e,
    0x69,
    0xe4,
    0x12,
    0x0b,
    0x29,
    0x12,
    0x0b,
    0x14,
    0xe4,
    0x85,
    0x3d,
    0x2c,
    0xf5,
    0x2b,
    0xf5,
    0x2a,
    0xf5,
    0x29,
    0xaf,
    0x2c,
    0xae,
    0x2b,
    0xad,
    0x2a,
    0xac,
    0x29,
    0xa3,
    0x12,
    0x0b,
    0x29,
    0x8f,
    0x2c,
    0x8e,
    0x2b,
    0x8d,
    0x2a,
    0x8c,
    0x29,
    0xe5,
    0x30,
    0x45,
    0x2c,
    0xf5,
    0x30,
    0xe5,
    0x2f,
    0x45,
    0x2b,
    0xf5,
    0x2f,
    0xe5,
    0x2e,
    0x45,
    0x2a,
    0xf5,
    0x2e,
    0xe5,
    0x2d,
    0x45,
    0x29,
    0xf5,
    0x2d,
    0xe4,
    0xf5,
    0x22,
    0xf5,
    0x23,
    0x85,
    0x30,
    0x1e,
    0x85,
    0x2f,
    0x1d,
    0x85,
    0x2e,
    0x1c,
    0x85,
    0x2d,
    0x1b,
    0x02,
    0x0a,
    0xb8,
    0x78,
    0x45,
    0x7e,
    0x00,
    0xe6,
    0xfc,
    0x08,
    0xe6,
    0xfd,
    0x12,
    0x02,
    0x9f,
    0x7c,
    0x00,
    0x22,
    0xe0,
    0xa3,
    0xe0,
    0x75,
    0xf0,
    0x02,
    0xa4,
    0xff,
    0xae,
    0xf0,
    0xc3,
    0x08,
    0xe6,
    0x9f,
    0xf6,
    0x18,
    0xe6,
    0x9e,
    0xf6,
    0x22,
    0xff,
    0xe5,
    0xf0,
    0x34,
    0x60,
    0x8f,
    0x82,
    0xf5,
    0x83,
    0xec,
    0xf0,
    0x22,
    0xe4,
    0xfc,
    0xfd,
    0x12,
    0x04,
    0x64,
    0x78,
    0x4f,
    0xe6,
    0xc3,
    0x13,
    0xfe,
    0x08,
    0xe6,
    0x13,
    0x22,
    0x78,
    0x45,
    0xe6,
    0xfe,
    0x08,
    0xe6,
    0xff,
    0xe4,
    0xfc,
    0xfd,
    0x22,
    0xe7,
    0xc4,
    0xf8,
    0x54,
    0xf0,
    0xc8,
    0x68,
    0xf7,
    0x09,
    0xe7,
    0xc4,
    0x54,
    0x0f,
    0x48,
    0xf7,
    0x22,
    0xe6,
    0xfc,
    0xed,
    0x75,
    0xf0,
    0x04,
    0xa4,
    0x22,
    0xe0,
    0xfe,
    0xa3,
    0xe0,
    0xfd,
    0xee,
    0xf6,
    0xed,
    0x08,
    0xf6,
    0x22,
    0x13,
    0xff,
    0xc3,
    0xe6,
    0x9f,
    0xff,
    0x18,
    0xe6,
    0x9e,
    0xfe,
    0x22,
    0xe6,
    0xc3,
    0x13,
    0xf7,
    0x08,
    0xe6,
    0x13,
    0x09,
    0xf7,
    0x22,
    0xe4,
    0xf5,
    0x3e,
    0x90,
    0x0e,
    0x77,
    0x93,
    0xff,
    0xe4,
    0x8f,
    0x2c,
    0xf5,
    0x2b,
    0xf5,
    0x2a,
    0xf5,
    0x29,
    0xaf,
    0x2c,
    0xae,
    0x2b,
    0xad,
    0x2a,
    0xac,
    0x29,
    0x90,
    0x0e,
    0x6a,
    0x12,
    0x0b,
    0x29,
    0x8f,
    0x2c,
    0x8e,
    0x2b,
    0x8d,
    0x2a,
    0x8c,
    0x29,
    0x90,
    0x0e,
    0x72,
    0x12,
    0x04,
    0x47,
    0xef,
    0x45,
    0x2c,
    0xf5,
    0x2c,
    0xee,
    0x45,
    0x2b,
    0xf5,
    0x2b,
    0xed,
    0x45,
    0x2a,
    0xf5,
    0x2a,
    0xec,
    0x45,
    0x29,
    0xf5,
    0x29,
    0xe4,
    0xf5,
    0x22,
    0xf5,
    0x23,
    0x85,
    0x2c,
    0x1e,
    0x85,
    0x2b,
    0x1d,
    0x85,
    0x2a,
    0x1c,
    0x85,
    0x29,
    0x1b,
    0x12,
    0x0a,
    0xb8,
    0xe4,
    0xf5,
    0x22,
    0xf5,
    0x23,
    0x90,
    0x0e,
    0x72,
    0x12,
    0x0b,
    0x1d,
    0x12,
    0x0a,
    0xb8,
    0xe4,
    0xf5,
    0x22,
    0xf5,
    0x23,
    0x90,
    0x0e,
    0x6e,
    0x12,
    0x0b,
    0x1d,
    0x02,
    0x0a,
    0xb8,
    0x75,
    0x89,
    0x03,
    0x75,
    0xa8,
    0x01,
    0x75,
    0xb8,
    0x04,
    0x75,
    0x29,
    0xff,
    0x75,
    0x2a,
    0x0e,
    0x75,
    0x2b,
    0x15,
    0x75,
    0x2c,
    0x0d,
    0x12,
    0x0a,
    0x3c,
    0x12,
    0x00,
    0x09,
    0x12,
    0x0b,
    0x2f,
    0x12,
    0x00,
    0x06,
    0xd2,
    0x00,
    0xd2,
    0x33,
    0xd2,
    0xaf,
    0x75,
    0x29,
    0xff,
    0x75,
    0x2a,
    0x0e,
    0x75,
    0x2b,
    0x49,
    0x75,
    0x2c,
    0x03,
    0x12,
    0x0a,
    0x3c,
    0x30,
    0x08,
    0x09,
    0xc2,
    0x33,
    0x12,
    0x06,
    0x72,
    0xc2,
    0x08,
    0xd2,
    0x33,
    0x30,
    0x09,
    0x09,
    0xc2,
    0x35,
    0x12,
    0x00,
    0x0e,
    0xc2,
    0x09,
    0xd2,
    0x35,
    0x30,
    0x0e,
    0x03,
    0x12,
    0x04,
    0xa2,
    0x30,
    0x34,
    0xdf,
    0x90,
    0x30,
    0x29,
    0xe5,
    0x3f,
    0xf0,
    0xb4,
    0x10,
    0x05,
    0x90,
    0x30,
    0x23,
    0xe4,
    0xf0,
    0xc2,
    0x34,
    0x80,
    0xcd,
    0xae,
    0x2a,
    0xaf,
    0x2b,
    0xe4,
    0xfd,
    0xed,
    0xc3,
    0x95,
    0x2c,
    0x50,
    0x33,
    0x12,
    0x0b,
    0x76,
    0xe4,
    0x93,
    0xf5,
    0x2d,
    0x74,
    0x01,
    0x93,
    0xf5,
    0x2e,
    0x45,
    0x2d,
    0x60,
    0x23,
    0x85,
    0x2e,
    0x82,
    0x85,
    0x2d,
    0x83,
    0xe0,
    0xfc,
    0x12,
    0x0b,
    0x76,
    0x74,
    0x03,
    0x93,
    0x52,
    0x04,
    0x12,
    0x0b,
    0x76,
    0x74,
    0x02,
    0x93,
    0x42,
    0x04,
    0x85,
    0x2e,
    0x82,
    0x85,
    0x2d,
    0x83,
    0xec,
    0xf0,
    0x0d,
    0x80,
    0xc7,
    0x22,
    0x78,
    0xb1,
    0xe6,
    0xd3,
    0x08,
    0xff,
    0xe6,
    0x64,
    0x80,
    0xf8,
    0xef,
    0x64,
    0x80,
    0x98,
    0x22,
    0x93,
    0xff,
    0x7e,
    0x00,
    0xe6,
    0xfc,
    0x08,
    0xe6,
    0xfd,
    0x12,
    0x02,
    0x9f,
    0x78,
    0xb4,
    0xe6,
    0xfc,
    0x08,
    0xe6,
    0xfd,
    0xd3,
    0xef,
    0x9d,
    0xee,
    0x9c,
    0x22,
    0x78,
    0xb0,
    0xd3,
    0xe6,
    0x64,
    0x80,
    0x94,
    0x80,
    0x22,
    0x25,
    0xe0,
    0x24,
    0x0a,
    0xf8,
    0xe6,
    0xfe,
    0x08,
    0xe6,
    0xff,
    0x22,
    0xa2,
    0xaf,
    0x92,
    0x31,
    0xc2,
    0xaf,
    0xe5,
    0x23,
    0x45,
    0x22,
    0x90,
    0x0e,
    0x5d,
    0x60,
    0x0b,
    0x12,
    0x0b,
    0x6b,
    0xe0,
    0xf5,
    0x19,
    0xe0,
    0xf5,
    0x1a,
    0x80,
    0x0f,
    0x12,
    0x0b,
    0x6b,
    0xe5,
    0x1d,
    0xf0,
    0x90,
    0x0e,
    0x5f,
    0x12,
    0x0b,
    0x6b,
    0xe5,
    0x1e,
    0xf0,
    0xa2,
    0x31,
    0x92,
    0xaf,
    0x22,
    0xd2,
    0x01,
    0xc2,
    0x02,
    0xe4,
    0xf5,
    0x40,
    0xf5,
    0x3f,
    0xd2,
    0x34,
    0xd2,
    0x32,
    0xd2,
    0x35,
    0xd2,
    0x01,
    0xc2,
    0x02,
    0xf5,
    0x40,
    0xf5,
    0x3f,
    0xd2,
    0x34,
    0xd2,
    0x32,
    0x22,
    0x2d,
    0xfd,
    0xe4,
    0x33,
    0xfc,
    0xe4,
    0x93,
    0xfe,
    0xfb,
    0xd3,
    0xed,
    0x9b,
    0x74,
    0x80,
    0xf8,
    0x6c,
    0x98,
    0x22,
    0x8f,
    0x30,
    0x8e,
    0x2f,
    0x8d,
    0x2e,
    0x8c,
    0x2d,
    0x22,
    0x12,
    0x04,
    0x47,
    0x8f,
    0x1e,
    0x8e,
    0x1d,
    0x8d,
    0x1c,
    0x8c,
    0x1b,
    0x22,
    0x93,
    0xf9,
    0xf8,
    0x02,
    0x04,
    0x34,
    0x90,
    0x0e,
    0x81,
    0x12,
    0x04,
    0x47,
    0x8f,
    0x3b,
    0x8e,
    0x3a,
    0x8d,
    0x39,
    0x8c,
    0x38,
    0xd2,
    0x06,
    0x30,
    0x06,
    0x03,
    0xd3,
    0x80,
    0x01,
    0xc3,
    0x92,
    0x0e,
    0x22,
    0xc0,
    0xe0,
    0xc0,
    0x83,
    0xc0,
    0x82,
    0x90,
    0x3f,
    0x0d,
    0xe0,
    0xf5,
    0x28,
    0xe5,
    0x28,
    0xf0,
    0xd0,
    0x82,
    0xd0,
    0x83,
    0xd0,
    0xe0,
    0x32,
    0x78,
    0x7f,
    0xe4,
    0xf6,
    0xd8,
    0xfd,
    0x75,
    0x81,
    0xc0,
    0x02,
    0x09,
    0xd3,
    0xe4,
    0x93,
    0xfe,
    0x74,
    0x01,
    0x93,
    0xf5,
    0x82,
    0x8e,
    0x83,
    0x22,
    0x8f,
    0x82,
    0x8e,
    0x83,
    0x75,
    0xf0,
    0x04,
    0xed,
    0x02,
    0x04,
    0x70,
    0x00,
    0x00,
    0x00,
    0x00,
    0x00,
    0x00,
    0x00,
    0x00,
    0x00,
    0x00,
    0x00,
    0x00,
    0x00,
    0x00,
    0x00,
    0x00,
    0x00,
    0x00,
    0x00,
    0x00,
    0x00,
    0x00,
    0x00,
    0x00,
    0x00,
    0x00,
    0x00,
    0x00,
    0x00,
    0x00,
    0x00,
    0x00,
    0x00,
    0x00,
    0x00,
    0x00,
    0x00,
    0x00,
    0x00,
    0x00,
    0x00,
    0x00,
    0x00,
    0x00,
    0x00,
    0x00,
    0x00,
    0x00,
    0x00,
    0x00,
    0x00,
    0x00,
    0x00,
    0x00,
    0x00,
    0x00,
    0x00,
    0x00,
    0x00,
    0x00,
    0x00,
    0x00,
    0x00,
    0x00,
    0x00,
    0x00,
    0x00,
    0x00,
    0x00,
    0x00,
    0x00,
    0x00,
    0x00,
    0x00,
    0x00,
    0x00,
    0x00,
    0x00,
    0x00,
    0x00,
    0x00,
    0x00,
    0x00,
    0x00,
    0x00,
    0x00,
    0x00,
    0x00,
    0x00,
    0x00,
    0x00,
    0x00,
    0x00,
    0x00,
    0x00,
    0x00,
    0x00,
    0x00,
    0x00,
    0x00,
    0x00,
    0x00,
    0x00,
    0x00,
    0x00,
    0x00,
    0x00,
    0x00,
    0x00,
    0x00,
    0x00,
    0x00,
    0x00,
    0x00,
    0x00,
    0x00,
    0x00,
    0x00,
    0x00,
    0x00,
    0x00,
    0x00,
    0x00,
    0x00,
    0x00,
    0x00,
    0x00,
    0x00,
    0x00,
    0x00,
    0x00,
    0x00,
    0x00,
    0x00,
    0x00,
    0x00,
    0x00,
    0x00,
    0x00,
    0x00,
    0x00,
    0x00,
    0x00,
    0x00,
    0x00,
    0x00,
    0x00,
    0x00,
    0x00,
    0x00,
    0x00,
    0x00,
    0x00,
    0x00,
    0x00,
    0x00,
    0x00,
    0x00,
    0x00,
    0x00,
    0x00,
    0x00,
    0x00,
    0x00,
    0x00,
    0x00,
    0x00,
    0x00,
    0x00,
    0x00,
    0x00,
    0x00,
    0x00,
    0x00,
    0x00,
    0x00,
    0x00,
    0x00,
    0x00,
    0x00,
    0x00,
    0x00,
    0x00,
    0x00,
    0x00,
    0x00,
    0x00,
    0x00,
    0x00,
    0x00,
    0x00,
    0x00,
    0x00,
    0x00,
    0x00,
    0x00,
    0x00,
    0x00,
    0x00,
    0x00,
    0x00,
    0x00,
    0x00,
    0x00,
    0x00,
    0x00,
    0x00,
    0x00,
    0x00,
    0x00,
    0x00,
    0x00,
    0x00,
    0x00,
    0x00,
    0x00,
    0x00,
    0x00,
    0x00,
    0x00,
    0x00,
    0x00,
    0x00,
    0x00,
    0x00,
    0x00,
    0x00,
    0x00,
    0x00,
    0x00,
    0x00,
    0x00,
    0x00,
    0x00,
    0x00,
    0x00,
    0x00,
    0x00,
    0x00,
    0x00,
    0x00,
    0x00,
    0x00,
    0x00,
    0x00,
    0x00,
    0x00,
    0x00,
    0x00,
    0x00,
    0x00,
    0x00,
    0x00,
    0x00,
    0x00,
    0x00,
    0x00,
    0x00,
    0x00,
    0x00,
    0x00,
    0x00,
    0x00,
    0x00,
    0x00,
    0x00,
    0x00,
    0x00,
    0x00,
    0x00,
    0x00,
    0x00,
    0x00,
    0x00,
    0x00,
    0x00,
    0x00,
    0x00,
    0x00,
    0x00,
    0x00,
    0x00,
    0x00,
    0x00,
    0x00,
    0x00,
    0x00,
    0x00,
    0x00,
    0x00,
    0x00,
    0x00,
    0x00,
    0x00,
    0x00,
    0x00,
    0x00,
    0x00,
    0x00,
    0x00,
    0x00,
    0x00,
    0x00,
    0x00,
    0x00,
    0x00,
    0x00,
    0x00,
    0x00,
    0x00,
    0x00,
    0x00,
    0x00,
    0x00,
    0x00,
    0x00,
    0x00,
    0x00,
    0x00,
    0x00,
    0x00,
    0x00,
    0x00,
    0x00,
    0x00,
    0x00,
    0x00,
    0x00,
    0x00,
    0x00,
    0x00,
    0x00,
    0x00,
    0x00,
    0x00,
    0x00,
    0x00,
    0x00,
    0x00,
    0x00,
    0x00,
    0x00,
    0x00,
    0x00,
    0x00,
    0x00,
    0x00,
    0x00,
    0x00,
    0x00,
    0x00,
    0x00,
    0x00,
    0x00,
    0x00,
    0x00,
    0x00,
    0x00,
    0x00,
    0x00,
    0x00,
    0x00,
    0x00,
    0x00,
    0x00,
    0x00,
    0x00,
    0x00,
    0x00,
    0x00,
    0x00,
    0x00,
    0x00,
    0x00,
    0x00,
    0x00,
    0x00,
    0x00,
    0x00,
    0x00,
    0x00,
    0x00,
    0x00,
    0x00,
    0x00,
    0x00,
    0x00,
    0x00,
    0x00,
    0x00,
    0x00,
    0x00,
    0x00,
    0x00,
    0x00,
    0x00,
    0x00,
    0x00,
    0x00,
    0x00,
    0x00,
    0x00,
    0x00,
    0x00,
    0x00,
    0x00,
    0x00,
    0x00,
    0x00,
    0x00,
    0x00,
    0x00,
    0x00,
    0x00,
    0x00,
    0x00,
    0x00,
    0x00,
    0x00,
    0x00,
    0x00,
    0x00,
    0x00,
    0x00,
    0x00,
    0x00,
    0x00,
    0x00,
    0x00,
    0x00,
    0x00,
    0x00,
    0x00,
    0x00,
    0x00,
    0x00,
    0x00,
    0x00,
    0x00,
    0x00,
    0x00,
    0x00,
    0x00,
    0x00,
    0x00,
    0x00,
    0x00,
    0x00,
    0x00,
    0x00,
    0x00,
    0x00,
    0x00,
    0x00,
    0x00,
    0x00,
    0x00,
    0x00,
    0x00,
    0x00,
    0x00,
    0x00,
    0x00,
    0x00,
    0x00,
    0x00,
    0x00,
    0x00,
    0x00,
    0x00,
    0x00,
    0x00,
    0x00,
    0x00,
    0x00,
    0x00,
    0x00,
    0x00,
    0x00,
    0x00,
    0x00,
    0x00,
    0x00,
    0x00,
    0x00,
    0x00,
    0x00,
    0x00,
    0x00,
    0x00,
    0x00,
    0x00,
    0x00,
    0x00,
    0x00,
    0x00,
    0x00,
    0x00,
    0x00,
    0x00,
    0x00,
    0x00,
    0x00,
    0x00,
    0x00,
    0x00,
    0x00,
    0x00,
    0x00,
    0x00,
    0x00,
    0x00,
    0x00,
    0x00,
    0x00,
    0x00,
    0x00,
    0x00,
    0x00,
    0x00,
    0x00,
    0x00,
    0x00,
    0x00,
    0x00,
    0x00,
    0x00,
    0x00,
    0x00,
    0x00,
    0x00,
    0x00,
    0x00,
    0x00,
    0x00,
    0x00,
    0x00,
    0x00,
    0x00,
    0x00,
    0x00,
    0x00,
    0x00,
    0x00,
    0x00,
    0x00,
    0x00,
    0x00,
    0x00,
    0x00,
    0x00,
    0x00,
    0x00,
    0x00,
    0x00,
    0x00,
    0x00,
    0x00,
    0x00,
    0x00,
    0x00,
    0x00,
    0x00,
    0x00,
    0x00,
    0x00,
    0x00,
    0x00,
    0x00,
    0x00,
    0x00,
    0x00,
    0x00,
    0x00,
    0x00,
    0x00,
    0x00,
    0x00,
    0x00,
    0x00,
    0x00,
    0x00,
    0x00,
    0x00,
    0x00,
    0x00,
    0x00,
    0x00,
    0x00,
    0x00,
    0x00,
    0x00,
    0x00,
    0x00,
    0x00,
    0x00,
    0x00,
    0x00,
    0x00,
    0x00,
    0x00,
    0x00,
    0x00,
    0x00,
    0x00,
    0x00,
    0x00,
    0x00,
    0x00,
    0x00,
    0x00,
    0x00,
    0x00,
    0x00,
    0x00,
    0x00,
    0x00,
    0x00,
    0x00,
    0x00,
    0x00,
    0x00,
    0x00,
    0x00,
    0x00,
    0x00,
    0x00,
    0x00,
    0x00,
    0x00,
    0x00,
    0x00,
    0x00,
    0x00,
    0x00,
    0x00,
    0x00,
    0x00,
    0x00,
    0x11,
    0x03,
    0x10,
    0x15,
    0x19,
    0x12,
    0x4f,
    0x56,
    0x54,
    0x20,
    0x20,
    0x20,
    0x20,
    0x20,
    0x20,
    0x01,
    0x10,
    0x00,
    0x56,
    0x40,
    0x1a,
    0x30,
    0x29,
    0x7e,
    0x00,
    0x30,
    0x04,
    0x20,
    0xdf,
    0x30,
    0x05,
    0x40,
    0xbf,
    0x50,
    0x25,
    0x04,
    0xfb,
    0x50,
    0x03,
    0x00,
    0xfd,
    0x50,
    0x27,
    0x01,
    0xfe,
    0x60,
    0x00,
    0x11,
    0x00,
    0x3f,
    0x05,
    0x30,
    0x00,
    0x3f,
    0x06,
    0x22,
    0x00,
    0x3f,
    0x01,
    0x29,
    0x00,
    0x3f,
    0x02,
    0x00,
    0x00,
    0x36,
    0x06,
    0x07,
    0x00,
    0x3f,
    0x0b,
    0x0f,
    0xf0,
    0x30,
    0x01,
    0x40,
    0xbf,
    0x30,
    0x01,
    0x00,
    0xbf,
    0x30,
    0x29,
    0x70,
    0x00,
    0x3a,
    0x00,
    0x01,
    0xfe,
    0x3a,
    0x00,
    0x00,
    0xfe,
    0x36,
    0x03,
    0x36,
    0x02,
    0x41,
    0x44,
    0x58,
    0x20,
    0x18,
    0x10,
    0x0a,
    0x04,
    0x04,
    0x00,
    0x03,
    0xff,
    0x64,
    0x00,
    0x00,
    0x80,
    0x00,
    0x00,
    0x00,
    0x00,
    0x00,
    0x00,
    0x02,
    0x04,
    0x06,
    0x00,
    0x03,
    0x98,
    0x00,
    0xcc,
    0x50,
    0x3c,
    0x28,
    0x1e,
    0x0c,
    0x0c,
    0x00,
    0x00,
    0x00,
    0x6e,
    0x05,
    0x05,
    0x00,
    0xa5,
    0x5a
};

//640X480 YUV 
__align(4) LOCAL const SENSOR_REG_T ov5640_640X480[]=
{
    {0x3103, 0x11},
    {0x3008, 0x82},
    {0x3008, 0x42},
    {0x3103, 0x03},
    {0x3017, 0xff},
    {0x3018, 0xff},
    {0x3034, 0x1a},
    {0x3035, 0x11},//0x11-->30fps; 0x21-->15fps
    {0x3036, 0x46},
    {0x3037, 0x13},
    {0x3108, 0x01},
    {0x3630, 0x2e},
    {0x3632, 0xe2},
    {0x3633, 0x23},
    {0x3621, 0xe0},
    {0x3704, 0xa0}, 
    {0x3703, 0x5a},
    {0x3715, 0x78},
    {0x3717, 0x01},
    {0x370b, 0x60},
    {0x3705, 0x1a},
    {0x3905, 0x02},
    {0x3906, 0x10},
    {0x3901, 0x0a},
    {0x3731, 0x12},
    {0x3600, 0x08},
    {0x3601, 0x33},
    {0x302d, 0x60},
    {0x3620, 0x52},
    {0x371b, 0x20},
    {0x471c, 0x50},
    {0x3a18, 0x00},
    {0x3a19, 0xf8},
    {0x3635, 0x1c},
    {0x3634, 0x40},
    {0x3622, 0x01},
    {0x3c00, 0x04}, //60hz:0x00;  50hz:0x04
    {0x3c01, 0xb4}, //60hz:0x34;  50hz:0xb4
    {0x3c04, 0x28},
    {0x3c05, 0x98},
    {0x3c06, 0x00},
    {0x3c07, 0x08},
    {0x3c08, 0x00},
    {0x3c09, 0x1c},
    {0x3c0a, 0x9c},
    {0x3c0b, 0x40},
    {0x3820, 0x41},
    {0x3821, 0x07},
    {0x3814, 0x31},
    {0x3815, 0x31},
    {0x3800, 0x00},
    {0x3801, 0x00},
    {0x3802, 0x00},
    {0x3803, 0x04},
    {0x3804, 0x0a},
    {0x3805, 0x3f}, 
    {0x3806, 0x07},
    {0x3807, 0x9b},
    {0x3808, 0x02},
    {0x3809, 0x80},
    {0x380a, 0x01},
    {0x380b, 0xe0},
    {0x380c, 0x07},
    {0x380d, 0x68},
    {0x380e, 0x03},
    {0x380f, 0xd8},
    {0x3810, 0x00},
    {0x3811, 0x10},
    {0x3812, 0x00},
    {0x3813, 0x06},
    {0x3618, 0x00},
    {0x3612, 0x29},
    {0x3708, 0x62},
    {0x3709, 0x52},
    {0x370c, 0x03},
    {0x3a02, 0x03},
    {0x3a03, 0xd8},
    {0x3a08, 0x01},
    {0x3a09, 0x27},
    {0x3a0a, 0x00},
    {0x3a0b, 0xf6},
    {0x3a0e, 0x03},
    {0x3a0d, 0x04},
    {0x3a14, 0x03},
    {0x3a15, 0xd8},
    {0x4001, 0x02},
    {0x4004, 0x02},
    {0x3000, 0x00},
    {0x3002, 0x1c},
    {0x3004, 0xff},
    {0x3006, 0xc3},
    {0x300e, 0x58},
    {0x302e, 0x00},
    {0x4300, 0x30},
    {0x501f, 0x00}, 
    {0x4713, 0x03},
    {0x4407, 0x04},
    {0x460b, 0x35},
    {0x460c, 0x22},
    {0x3824, 0x02},
    {0x5000, 0xa7},
    {0x5001, 0xa3},
    {0x5180, 0xff},
    {0x5181, 0xf2},
    {0x5182, 0x00},
    {0x5183, 0x14},
    {0x5184, 0x25},
    {0x5185, 0x24},
    {0x5186, 0x09},
    {0x5187, 0x09},
    {0x5188, 0x09},
    {0x5189, 0x75},
    {0x518a, 0x54},
    {0x518b, 0xe0},
    {0x518c, 0xb2},
    {0x518d, 0x42},
    {0x518e, 0x3d},
    {0x518f, 0x56},
    {0x5190, 0x46},
    {0x5191, 0xf8},
    {0x5192, 0x04},
    {0x5193, 0x70},
    {0x5194, 0xf0},
    {0x5195, 0xf0},
    {0x5196, 0x03},
    {0x5197, 0x01},
    {0x5198, 0x04},
    {0x5199, 0x12},
    {0x519a, 0x04},
    {0x519b, 0x00},
    {0x519c, 0x06},
    {0x519d, 0x82},
    {0x519e, 0x38},
    {0x5381, 0x1c}, 
    {0x5382, 0x5a},
    {0x5383, 0x06},
    {0x5384, 0x0a},
    {0x5385, 0x7e},
    {0x5386, 0x88},
    {0x5387, 0x7c},
    {0x5388, 0x6c},
    {0x5389, 0x10},
    {0x538a, 0x01},
    {0x538b, 0x98},
    {0x5300, 0x08},
    {0x5301, 0x30},
    {0x5302, 0x10},
    {0x5303, 0x00},
    {0x5304, 0x08},
    {0x5305, 0x30},
    {0x5306, 0x08},
    {0x5307, 0x16},
    {0x5309, 0x08},
    {0x530a, 0x30},
    {0x530b, 0x04},
    {0x530c, 0x06},
    {0x5480, 0x01},
    {0x5481, 0x08},
    {0x5482, 0x14},
    {0x5483, 0x28},
    {0x5484, 0x51},
    {0x5485, 0x65},
    {0x5486, 0x71},
    {0x5487, 0x7d},
    {0x5488, 0x87},
    {0x5489, 0x91},
    {0x548a, 0x9a},
    {0x548b, 0xaa},
    {0x548c, 0xb8},
    {0x548d, 0xcd},
    {0x548e, 0xdd},
    {0x548f, 0xea},
    {0x5490, 0x1d}, 
    {0x5580, 0x02},
    {0x5583, 0x40},
    {0x5584, 0x10},
    {0x5589, 0x10},
    {0x558a, 0x00},
    {0x558b, 0xf8},
    {0x5800, 0x23},
    {0x5801, 0x15},
    {0x5802, 0x10},
    {0x5803, 0x10},
    {0x5804, 0x15},
    {0x5805, 0x23},
    {0x5806, 0x0c},
    {0x5807, 0x08},
    {0x5808, 0x05},
    {0x5809, 0x05},
    {0x580a, 0x08},
    {0x580b, 0x0c},
    {0x580c, 0x07},
    {0x580d, 0x03},
    {0x580e, 0x00},
    {0x580f, 0x00},
    {0x5810, 0x03},
    {0x5811, 0x07},
    {0x5812, 0x07},
    {0x5813, 0x03},
    {0x5814, 0x00},
    {0x5815, 0x00},
    {0x5816, 0x03},
    {0x5817, 0x07},
    {0x5818, 0x0b},
    {0x5819, 0x08},
    {0x581a, 0x05},
    {0x581b, 0x05},
    {0x581c, 0x07},
    {0x581d, 0x0b},
    {0x581e, 0x2a},
    {0x581f, 0x16},
    {0x5820, 0x11}, 
    {0x5821, 0x11},
    {0x5822, 0x15},
    {0x5823, 0x29},
    {0x5824, 0xbf},
    {0x5825, 0xaf},
    {0x5826, 0x9f},
    {0x5827, 0xaf},
    {0x5828, 0xdf},
    {0x5829, 0x6f},
    {0x582a, 0x8e},
    {0x582b, 0xab},
    {0x582c, 0x9e},
    {0x582d, 0x7f},
    {0x582e, 0x4f},
    {0x582f, 0x89},
    {0x5830, 0x86},
    {0x5831, 0x98},
    {0x5832, 0x6f},
    {0x5833, 0x4f},
    {0x5834, 0x6e},
    {0x5835, 0x7b},
    {0x5836, 0x7e},
    {0x5837, 0x6f},
    {0x5838, 0xde},
    {0x5839, 0xbf},
    {0x583a, 0x9f},
    {0x583b, 0xbf},
    {0x583c, 0xec},
    {0x5025, 0x00},
    {0x3a0f, 0x30},
    {0x3a10, 0x28},
    {0x3a1b, 0x30},
    {0x3a1e, 0x26},
    {0x3a11, 0x60},
    {0x3a1f, 0x14},
    {0x3008, 0x02}
    //if register:0x3035 is setted 0x21,the frame rate is 15fps
    //if not ,the frame rate is 15fps
    //{0x3035    ,  0x21}
};

//1280X960  YUV   Mode
__align(4) LOCAL const SENSOR_REG_T ov5640_1280X960[] =
{
    {0x3035, 0x11},
    {0x3036, 0x69},
    {0x3c07, 0x07},
    {0x3820, 0x40},
    {0x3814, 0x11},
    {0x3815, 0x11},
    {0x3803, 0x00},
    {0x3807, 0x9f},
    {0x3808, 0x05},
    {0x3809, 0x00},
    {0x380a, 0x03},
    {0x380b, 0xc0},
    {0x380c, 0x0b},
    {0x380d, 0x1c},
    {0x380e, 0x07},
    {0x380f, 0xb0},
    {0x3813, 0x04},
    {0x3618, 0x04},
    {0x3612, 0x2b},
    {0x3708, 0x21},
    {0x3709, 0x12},
    {0x370c, 0x00},
    {0x3a02, 0x07},
    {0x3a03, 0xb0},
    {0x3a0e, 0x06},
    {0x3a0d, 0x08},
    {0x3a14, 0x07},
    {0x3a15, 0xb0},
    {0x4004, 0x06},
    {0x4713, 0x02},
    {0x4407, 0x0c},
    {0x460b, 0x37},
    {0x460c, 0x20},
    {0x3821, 0x26},
    {0x3002, 0x00},
    {0x3006, 0xff},
    {0x4713, 0x02},
    {0x3824, 0x04}
}; 
 
//1600X1200  YUV   Mode
__align(4) LOCAL const SENSOR_REG_T ov5640_1600X1200[] =
{
    {0x3035, 0x11},
    {0x3036, 0x69},
    {0x3c07, 0x07},
    {0x3820, 0x40},
    {0x3814, 0x11},
    {0x3815, 0x11},
    {0x3803, 0x00},
    {0x3807, 0x9f},
    {0x3808, 0x06},
    {0x3809, 0x40},
    {0x380a, 0x04},
    {0x380b, 0xb0},
    {0x380c, 0x0b},
    {0x380d, 0x1c},
    {0x380e, 0x07},
    {0x380f, 0xb0},
    {0x3813, 0x04},
    {0x3618, 0x04},
    {0x3612, 0x2b},
    {0x3708, 0x21},
    {0x3709, 0x12},
    {0x370c, 0x00},
    {0x3a02, 0x07},
    {0x3a03, 0xb0},
    {0x3a0e, 0x06},
    {0x3a0d, 0x08},
    {0x3a14, 0x07},
    {0x3a15, 0xb0},
    {0x4004, 0x06},
    {0x4713, 0x02},
    {0x4407, 0x0c},
    {0x460b, 0x37},
    {0x460c, 0x20},
    {0x3821, 0x26},
    {0x3002, 0x00},
    {0x3006, 0xff},
    {0x4713, 0x02},
    {0x3824, 0x04}
} ; 

//20480X1536  JPG   Mode
__align(4) LOCAL const SENSOR_REG_T ov5640_2048X1536[] =
{
    {0x3035, 0x11},
    {0x3036, 0x69},
    {0x3c07, 0x07},
    {0x3820, 0x40},
    {0x3814, 0x11},
    {0x3815, 0x11},
    {0x3803, 0x00},
    {0x3807, 0x9f},
    {0x3808, 0x08},
    {0x3809, 0x00},
    {0x380a, 0x06},
    {0x380b, 0x00},
    {0x380c, 0x0b},
    {0x380d, 0x1c},
    {0x380e, 0x07},
    {0x380f, 0xb0},
    {0x3813, 0x04},
    {0x3618, 0x04},
    {0x3612, 0x2b},
    {0x3708, 0x21},
    {0x3709, 0x12},
    {0x370c, 0x00},
    {0x3a02, 0x07},
    {0x3a03, 0xb0},
    {0x3a0e, 0x06},
    {0x3a0d, 0x08},
    {0x3a14, 0x07},
    {0x3a15, 0xb0},
    {0x4004, 0x06},
    {0x4713, 0x02},
    {0x4407, 0x0c},
    {0x460b, 0x37},
    {0x460c, 0x20},
    {0x3821, 0x26},
    {0x3002, 0x00},
    {0x3006, 0xff},
    {0x4713, 0x02},
    {0x3824, 0x04}
};

//2592X1944  JPG   Mode
__align(4) LOCAL const SENSOR_REG_T ov5640_2592X1944[] =
{
    {0x3035, 0x11},
    {0x3036, 0x69},
    {0x3c07, 0x07},
    {0x3820, 0x40},
    {0x3814, 0x11},
    {0x3815, 0x11},
    {0x3803, 0x00},
    {0x3807, 0x9f},
    {0x3808, 0x0a},
    {0x3809, 0x20},
    {0x380a, 0x07},
    {0x380b, 0x98},
    {0x380c, 0x0b},
    {0x380d, 0x1c},
    {0x380e, 0x07},
    {0x380f, 0xb0},
    {0x3813, 0x04},
    {0x3618, 0x04},
    {0x3612, 0x2b},
    {0x3708, 0x21},
    {0x3709, 0x12},
    {0x370c, 0x00},
    {0x3a02, 0x07},
    {0x3a03, 0xb0},
    {0x3a0e, 0x06},
    {0x3a0d, 0x08},
    {0x3a14, 0x07},
    {0x3a15, 0xb0},
    {0x4004, 0x06},
    {0x4713, 0x02},
    {0x4407, 0x0c},
    {0x460b, 0x37},
    {0x460c, 0x20},
    {0x3821, 0x26},
    {0x3002, 0x00},
    {0x3006, 0xff},
    {0x4713, 0x02},
    {0x3824, 0x04}
};

LOCAL SENSOR_REG_TAB_INFO_T s_ov5640_resolution_Tab_YUV[]=
{    
    // COMMON INIT
    {ADDR_AND_LEN_OF_ARRAY(ov5640_640X480),   0, 0, 24, SENSOR_IMAGE_FORMAT_YUV422}, 
    
    // YUV422 PREVIEW 1 
    {ADDR_AND_LEN_OF_ARRAY(ov5640_640X480),   640,  480,   24, SENSOR_IMAGE_FORMAT_YUV422}, 
    {ADDR_AND_LEN_OF_ARRAY(ov5640_1280X960),  1280, 960,   24, SENSOR_IMAGE_FORMAT_JPEG}, 
    {ADDR_AND_LEN_OF_ARRAY(ov5640_1600X1200), 1600, 1200,  24, SENSOR_IMAGE_FORMAT_JPEG}, 
    {ADDR_AND_LEN_OF_ARRAY(ov5640_2048X1536), 2048, 1536,  24, SENSOR_IMAGE_FORMAT_JPEG},
    
    // YUV422 PREVIEW 2 
    {ADDR_AND_LEN_OF_ARRAY(ov5640_2592X1944), 2592, 1944,  24, SENSOR_IMAGE_FORMAT_JPEG}, 
    {PNULL, 0, 0, 0, 0, 0},
    {PNULL, 0, 0, 0, 0, 0},
    {PNULL, 0, 0, 0, 0, 0}
};


LOCAL SENSOR_TRIM_T s_ov5640_Resolution_Trim_Tab[]=
{    
    // COMMON INIT
    {0, 0, 640, 480, 0, 0},
    
    // YUV422 PREVIEW 1    
    {0, 0, 640, 480, 68, 56},
    {0, 0, 1280, 960, 122, 42},
    {0, 0, 1600, 1200, 122, 42},
    {0, 0, 2048, 1536, 122, 42},
    
    // YUV422 PREVIEW 2 
    {0, 0, 2592, 1944, 122, 42},
    {0, 0, 0, 0, 0, 0},
    {0, 0, 0, 0, 0, 0},
    {0, 0, 0, 0, 0, 0}
};

LOCAL EXIF_SPEC_PIC_TAKING_COND_T s_ov5640_exif={0x00};

LOCAL SENSOR_IOCTL_FUNC_TAB_T s_ov5640_ioctl_func_tab = 
{
    // Internal 
    PNULL,
    _ov5640_PowerOn,
    PNULL,
    _ov5640_Identify,

    PNULL,            // write register
    PNULL,            // read  register    
    PNULL,
    _ov5640_GetResolutionTrimTab,

    // External
    PNULL,
    PNULL,
    PNULL,

    _ov5640_set_brightness,
    _ov5640_set_contrast,
    PNULL,
    _ov5640_set_saturation,

    PNULL,    
    _ov5640_set_image_effect,

    _ov5640_BeforeSnapshot,
    _ov5640_after_snapshot,
    PNULL,
    PNULL,
    PNULL,
    PNULL,
    PNULL,
    PNULL,
    PNULL,
    PNULL,
    PNULL,
    PNULL,
    PNULL,
    PNULL,
    _ov5640_set_ev,
    _ov5640_check_image_format_support,
    PNULL,
    PNULL,
    _ov5640_GetExifInfo,
    _ov5640_ExtFunc,
    PNULL,
    PNULL,
    _ov5640_pick_out_jpeg_stream,
    PNULL
};

/**---------------------------------------------------------------------------*
 **                         Global Variables                                  *
 **---------------------------------------------------------------------------*/
LOCAL SENSOR_EXTEND_INFO_T g_ov5640_ext_info = {
    SENSOR_FOCUS_TRIG|\
    SENSOR_FOCUS_ZONE,
    SENSOR_EXPOSURE_AUTO|\
    SENSOR_EXPOSURE_ZONE
};

PUBLIC SENSOR_INFO_T g_ov5640_yuv_info =
{
    ov5640_I2C_ADDR_W,                // salve i2c write address
    ov5640_I2C_ADDR_R,                 // salve i2c read address
    
    SENSOR_I2C_REG_16BIT|\
    SENSOR_I2C_REG_8BIT,            // bit0: 0: i2c register value is 8 bit, 1: i2c register value is 16 bit
                                    // bit1: 0: i2c register addr  is 8 bit, 1: i2c register addr  is 16 bit
                                    // other bit: reseved
    SENSOR_HW_SIGNAL_PCLK_N|\
    SENSOR_HW_SIGNAL_VSYNC_N|\
    SENSOR_HW_SIGNAL_HSYNC_P,        // bit0: 0:negative; 1:positive -> polarily of pixel clock
                                    // bit2: 0:negative; 1:positive -> polarily of horizontal synchronization signal
                                    // bit4: 0:negative; 1:positive -> polarily of vertical synchronization signal
                                    // other bit: reseved                                            
                                            
    // preview mode
    SENSOR_ENVIROMENT_NORMAL|\
    SENSOR_ENVIROMENT_NIGHT,
    
    // image effect
    SENSOR_IMAGE_EFFECT_NORMAL|\
    SENSOR_IMAGE_EFFECT_BLACKWHITE|\
    SENSOR_IMAGE_EFFECT_RED|\
    SENSOR_IMAGE_EFFECT_GREEN|\
    SENSOR_IMAGE_EFFECT_BLUE|\
    SENSOR_IMAGE_EFFECT_YELLOW|\
    SENSOR_IMAGE_EFFECT_NEGATIVE|\
    SENSOR_IMAGE_EFFECT_CANVAS,
    
    // while balance mode
    0,
        
    7,                                // bit[0:7]: count of step in brightness, contrast, sharpness, saturation
                                    // bit[8:31] reseved
    
    SENSOR_LOW_PULSE_RESET,            // reset pulse level
    50,                                // reset pulse width(ms)
    
    SENSOR_HIGH_LEVEL_PWDN,            // 1: high level valid; 0: low level valid
    
    1,                                // count of identify code
    0x0A, 0x56,                        // supply two code to identify sensor.
    0x0B, 0x40,                        // for Example: index = 0-> Device id, index = 1 -> version id                                            
                                            
    SENSOR_AVDD_2800MV,                // voltage of avdd    
    
    2592,                            // max width of source image
    1944,                            // max height of source image
    "ov5640",                        // name of sensor                                                

    SENSOR_IMAGE_FORMAT_MAX,        // define in SENSOR_IMAGE_FORMAT_E enum,SENSOR_IMAGE_FORMAT_MAX
                                    // if set to SENSOR_IMAGE_FORMAT_MAX here, image format depent on SENSOR_REG_TAB_INFO_T

    SENSOR_IMAGE_PATTERN_YUV422_YUYV,    // pattern of input image form sensor;            

    s_ov5640_resolution_Tab_YUV,    // point to resolution table information structure
    &s_ov5640_ioctl_func_tab,        // point to ioctl function table
    PNULL,                            // information and table about Rawrgb sensor
    &g_ov5640_ext_info,                // extend information about sensor
    SENSOR_AVDD_2800MV,                     // iovdd
    SENSOR_AVDD_1500MV,                      // dvdd
    4,                     // skip frame num before preview 
    2,                      // skip frame num before capture        
    0,                      // deci frame num during preview    
    0,                      // deci frame num during video preview      

    0,
    0,
    0,
    0,
    0,
    0
};
/******************************************************************************/
// Description:
// Global resource dependence: 
// Author: Tim.zhu
// Note:
/******************************************************************************/
LOCAL uint32 _ov5640_GetExifInfo(uint32 param)
{
    return (uint32)&s_ov5640_exif;
}

/******************************************************************************/
// Description: get ov7670 rssolution trim tab
// Global resource dependence: 
// Author: Tim.zhu
// Note:
/******************************************************************************/
LOCAL uint32 _ov5640_InitExifInfo(void)
{
    EXIF_SPEC_PIC_TAKING_COND_T* exif_ptr=&s_ov5640_exif;

    //SCI_TRACE_LOW:"SENSOR: _ov5640_InitExifInfo"
    SCI_TRACE_ID(TRACE_TOOL_CONVERT,SENSOR_OV5640_4427_112_2_18_0_31_57_1133,(uint8*)"");

    exif_ptr->valid.FNumber=1;
    exif_ptr->FNumber.numerator=14;
    exif_ptr->FNumber.denominator=5;
    
    exif_ptr->valid.ExposureProgram=1;
    exif_ptr->ExposureProgram=0x04;

    //exif_ptr->SpectralSensitivity[MAX_ASCII_STR_SIZE];    
    //exif_ptr->ISOSpeedRatings;
    //exif_ptr->OECF;
    
    //exif_ptr->ShutterSpeedValue;
    
    exif_ptr->valid.ApertureValue=1;
    exif_ptr->ApertureValue.numerator=14;
    exif_ptr->ApertureValue.denominator=5;
    
    //exif_ptr->BrightnessValue;
    //exif_ptr->ExposureBiasValue;

    exif_ptr->valid.MaxApertureValue=1;
    exif_ptr->MaxApertureValue.numerator=14;
    exif_ptr->MaxApertureValue.denominator=5;
    
    //exif_ptr->SubjectDistance;
    //exif_ptr->MeteringMode;
    //exif_ptr->LightSource;
    //exif_ptr->Flash;

    exif_ptr->valid.FocalLength=1;
    exif_ptr->FocalLength.numerator=289;
    exif_ptr->FocalLength.denominator=100;
    
    //exif_ptr->SubjectArea;
    //exif_ptr->FlashEnergy;
    //exif_ptr->SpatialFrequencyResponse;
    //exif_ptr->FocalPlaneXResolution;
    //exif_ptr->FocalPlaneYResolution;
    //exif_ptr->FocalPlaneResolutionUnit;
    //exif_ptr->SubjectLocation[2];
    //exif_ptr->ExposureIndex;
    //exif_ptr->SensingMethod;

    exif_ptr->valid.FileSource=1;
    exif_ptr->FileSource=0x03;

    //exif_ptr->SceneType;
    //exif_ptr->CFAPattern;
    //exif_ptr->CustomRendered;

    exif_ptr->valid.ExposureMode=1;
    exif_ptr->ExposureMode=0x00;

    exif_ptr->valid.WhiteBalance=1;
    exif_ptr->WhiteBalance=0x00;
    
    //exif_ptr->DigitalZoomRatio;
    //exif_ptr->FocalLengthIn35mmFilm;
    //exif_ptr->SceneCaptureType;    
    //exif_ptr->GainControl;
    //exif_ptr->Contrast;
    //exif_ptr->Saturation;
    //exif_ptr->Sharpness;
    //exif_ptr->DeviceSettingDescription;
    //exif_ptr->SubjectDistanceRange;

    return SCI_SUCCESS;
}

/******************************************************************************/
// Description: get ov7670 rssolution trim tab
// Global resource dependence: 
// Author: Tim.zhu
// Note:
/******************************************************************************/
LOCAL uint32 _ov5640_GetResolutionTrimTab(uint32 param)
{
    return (uint32)s_ov5640_Resolution_Trim_Tab;
}

/******************************************************************************/
// Description: sensor ov5640 power on/down sequence
// Global resource dependence: 
// Author: Tim.zhu
// Note:
/******************************************************************************/
LOCAL uint32 _ov5640_PowerOn(uint32 power_on)
{
    SENSOR_AVDD_VAL_E dvdd_val=g_ov5640_yuv_info.dvdd_val;
    SENSOR_AVDD_VAL_E avdd_val=g_ov5640_yuv_info.avdd_val;
    SENSOR_AVDD_VAL_E iovdd_val=g_ov5640_yuv_info.iovdd_val;  
    BOOLEAN power_down=g_ov5640_yuv_info.power_down_level;        
    BOOLEAN reset_level=g_ov5640_yuv_info.reset_pulse_level;
    uint32 reset_width=g_ov5640_yuv_info.reset_pulse_width;        
    
    if(SCI_TRUE==power_on)
    {
        Sensor_SetVoltage(dvdd_val, avdd_val, iovdd_val);
        
        Sensor_PowerDown((BOOLEAN)!power_down);

        // Open Mclk in default frequency
        Sensor_SetMCLK(SENSOR_DEFALUT_MCLK);   
        
        SCI_Sleep(20);
        Sensor_SetResetLevel(reset_level);
        SCI_Sleep(reset_width);
        Sensor_SetResetLevel((BOOLEAN)!reset_level);
        SCI_Sleep(100);
    }
    else
    {
        Sensor_PowerDown(power_down);

        Sensor_SetMCLK(SENSOR_DISABLE_MCLK);           

        Sensor_SetVoltage(SENSOR_AVDD_CLOSED, SENSOR_AVDD_CLOSED, SENSOR_AVDD_CLOSED);        
    }
    
    //SCI_TRACE_LOW:"SENSOR: _ov5640_Power_On(1:on, 0:off): %d"
    SCI_TRACE_ID(TRACE_TOOL_CONVERT,SENSOR_OV5640_4544_112_2_18_0_31_57_1134,(uint8*)"d", power_on);
    
    return SCI_SUCCESS;
}

/******************************************************************************/
// Description:
// Global resource dependence: 
// Author: Tim.zhu
// Note:
//        
/******************************************************************************/
LOCAL uint32 _ov5640_Identify(uint32 param)
{
    #define ov5640_PID_VALUE    0x56    
    #define ov5640_PID_ADDR     0x300A
    #define ov5640_VER_VALUE    0x40    
    #define ov5640_VER_ADDR     0x300B

    uint8 pid_value=0x00;
    uint8 ver_value=0x00;
    uint32 ret_value=SCI_ERROR;

    pid_value = Sensor_ReadReg(ov5640_PID_ADDR);

    if(ov5640_PID_VALUE==pid_value)
    {
        ver_value=Sensor_ReadReg(ov5640_VER_ADDR);

        //SCI_TRACE_LOW:"SENSOR: ov5640_Identify: PID = %x, VER = %x"
        SCI_TRACE_ID(TRACE_TOOL_CONVERT,SENSOR_OV5640_4571_112_2_18_0_31_57_1135,(uint8*)"dd",pid_value, ver_value);

        if(ov5640_VER_VALUE==ver_value)
        {
            ret_value=SCI_SUCCESS;
            //SCI_TRACE_LOW:"SENSOR: this is ov5640 sensor !"
            SCI_TRACE_ID(TRACE_TOOL_CONVERT,SENSOR_OV5640_4576_112_2_18_0_31_57_1136,(uint8*)"");
        }
        else
        {
            //SCI_TRACE_LOW:"SENSOR: ov5640_Identify this is OV%x%x sensor !"
            SCI_TRACE_ID(TRACE_TOOL_CONVERT,SENSOR_OV5640_4580_112_2_18_0_31_57_1137,(uint8*)"dd", pid_value, ver_value);
        }

    }

    _ov5640_InitExifInfo();
    
    return ret_value;
}

/******************************************************************************/
// Description: set brightness 
// Global resource dependence: 
// Author: Tim.zhu
// Note:
//
/******************************************************************************/
__align(4) LOCAL const SENSOR_REG_T ov5640_brightness_tab[][5]=
{
    {//level -3
        {0x5001 ,0xff},{0x5589 ,0x30},{0x5580 ,0x04},{0x5588 ,0x49},{0xffff, 0xff}
    },
    {//level -2
        {0x5001 ,0xff},{0x5589 ,0x20},{0x5580 ,0x04},{0x5588 ,0x49},{0xffff, 0xff}
    },
    {//level -1
        {0x5001 ,0xff},{0x5589 ,0x10},{0x5580 ,0x04},{0x5588 ,0x49},{0xffff, 0xff}
    },
    {//level 0
        {0x5001 ,0xff},{0x5589 ,0x00},{0x5580 ,0x04},{0x5588 ,0x41},{0xffff, 0xff}
    },
    {//level 1
        {0x5001 ,0xff},{0x5589 ,0x10},{0x5580 ,0x04},{0x5588 ,0x41},{0xffff, 0xff}
    },
    {//level 2
        {0x5001 ,0xff},{0x5589 ,0x20},{0x5580 ,0x04},{0x5588 ,0x41},{0xffff, 0xff}
    },
    {//level 3
        {0x5001 ,0xff},{0x5589 ,0x30},{0x5580 ,0x04},{0x5588 ,0x41},{0xffff, 0xff}
    }
};
LOCAL uint32 _ov5640_set_brightness(uint32 level)
{
    uint16 i=0x00;
    SENSOR_REG_T_PTR sensor_reg_ptr=(SENSOR_REG_T_PTR)ov5640_brightness_tab[level];

    SCI_ASSERT(PNULL!=sensor_reg_ptr);   /*assert verified*/
    
    for(i=0x00; (0xffff!=sensor_reg_ptr[i].reg_addr)||(0xff!=sensor_reg_ptr[i].reg_value); i++)/*lint -esym(613, sensor_reg_ptr) */
    {
        Sensor_WriteReg(sensor_reg_ptr[i].reg_addr, sensor_reg_ptr[i].reg_value);
    }

    //SCI_TRACE_LOW:"SENSOR: _ov5640_set_brightness = 0x%02x"
    SCI_TRACE_ID(TRACE_TOOL_CONVERT,SENSOR_OV5640_4631_112_2_18_0_31_58_1138,(uint8*)"d", level);
    return 0;
}

/******************************************************************************/
// Description: set contrast
// Global resource dependence: 
// Author: Tim.zhu
// Note:
//
/******************************************************************************/
__align(4) LOCAL const SENSOR_REG_T ov5640_contrast_tab[][6]=
{
    {//level -3
        {0x5001 ,0xff},{0x5580 ,0x04},{0x5586 ,0x14},{0x5585 ,0x14},{0x5588 ,0x41},{0xffff, 0xff}
    },
    {//level -2
        {0x5001 ,0xff},{0x5580 ,0x04},{0x5586 ,0x18},{0x5585 ,0x18},{0x5588 ,0x41},{0xffff, 0xff}
    },
    {//level -1
        {0x5001 ,0xff},{0x5580 ,0x04},{0x5586 ,0x1c},{0x5585 ,0x1c},{0x5588 ,0x41},{0xffff, 0xff}
    },
    {//level 0
        {0x5001 ,0xff},{0x5580 ,0x04},{0x5586 ,0x20},{0x5585 ,0x20},{0x5588 ,0x41},{0xffff, 0xff}
    },
    {//level 1
        {0x5001 ,0xff},{0x5580 ,0x04},{0x5586 ,0x24},{0x5585 ,0x24},{0x5588 ,0x41},{0xffff, 0xff}
    },
    {//level 2
        {0x5001 ,0xff},{0x5580 ,0x04},{0x5586 ,0x28},{0x5585 ,0x28},{0x5588 ,0x41},{0xffff, 0xff}
    },
    {//level 3
        {0x5001 ,0xff},{0x5580 ,0x04},{0x5586 ,0x2c},{0x5585 ,0x2c},{0x5588 ,0x41},{0xffff, 0xff}
    }
};
    
LOCAL uint32 _ov5640_set_contrast(uint32 level)
{
    uint16 i=0x00;
    SENSOR_REG_T_PTR sensor_reg_ptr=(SENSOR_REG_T_PTR)ov5640_contrast_tab[level];
    
    SCI_ASSERT(PNULL!=sensor_reg_ptr);   /*assert verified*/
    
    for(i=0x00; (0xffff!=sensor_reg_ptr[i].reg_addr)||(0xFF!=sensor_reg_ptr[i].reg_value); i++)
    {
        Sensor_WriteReg(sensor_reg_ptr[i].reg_addr, sensor_reg_ptr[i].reg_value);
    }

    Sensor_SetSensorExifInfo(SENSOR_EXIF_CTRL_CONTRAST, (uint32)level);

    //SCI_TRACE_LOW:"SENSOR: _ov5640_set_contrast = 0x%02x"
    SCI_TRACE_ID(TRACE_TOOL_CONVERT,SENSOR_OV5640_4679_112_2_18_0_31_58_1139,(uint8*)"d", level);
    return 0;
}

/******************************************************************************/
// Description:
// Global resource dependence: 
// Author: Tim.zhu
// Note:
//        
/******************************************************************************/
LOCAL uint32 _ov5640_set_sharpness(uint32 level)
{
    return 0;
}

/******************************************************************************/
// Description:
// Global resource dependence: 
// Author: Tim.zhu
// Note:
//        
/******************************************************************************/
__align(4) LOCAL const SENSOR_REG_T ov5640_saturation_tab[][6]=
{
    {//level -3
        {0x5001 ,0xff},{0x5583 ,0x10},{0x5584 ,0x10},{0x5580 ,0x02},{0x5588 ,0x41},{0xffff, 0xff}
    },
    {//level -2
        {0x5001 ,0xff},{0x5583 ,0x20},{0x5584 ,0x20},{0x5580 ,0x02},{0x5588 ,0x41},{0xffff, 0xff}
    },
    {//level -1
        {0x5001 ,0xff},{0x5583 ,0x30},{0x5584 ,0x30},{0x5580 ,0x02},{0x5588 ,0x41},{0xffff, 0xff}
    },
    {//level 0
        {0x5001 ,0xff},{0x5583 ,0x40},{0x5584 ,0x40},{0x5580 ,0x02},{0x5588 ,0x41},{0xffff, 0xff}
    },
    {//level 1
        {0x5001 ,0xff},{0x5583 ,0x50},{0x5584 ,0x50},{0x5580 ,0x02},{0x5588 ,0x41},{0xffff, 0xff}
    },
    {//level 2
        {0x5001 ,0xff},{0x5583 ,0x60},{0x5584 ,0x60},{0x5580 ,0x02},{0x5588 ,0x41},{0xffff, 0xff}
    },
    {//level 3
        {0x5001 ,0xff},{0x5583 ,0x70},{0x5584 ,0x70},{0x5580 ,0x02},{0x5588 ,0x41},{0xffff, 0xff}
    }
};
    
LOCAL uint32 _ov5640_set_saturation(uint32 level)
{
    uint16 i=0x00;
    SENSOR_REG_T_PTR sensor_reg_ptr=(SENSOR_REG_T_PTR)ov5640_saturation_tab[level];
    
    SCI_ASSERT(PNULL!=sensor_reg_ptr);   /*assert verified*/
    
    for(i=0x00; (0xffff!=sensor_reg_ptr[i].reg_addr)||(0xFF!=sensor_reg_ptr[i].reg_value); i++)
    {
        Sensor_WriteReg(sensor_reg_ptr[i].reg_addr, sensor_reg_ptr[i].reg_value);
    }
    //SCI_TRACE_LOW:"SENSOR: _ov5640_set_saturation = 0x%02x"
    SCI_TRACE_ID(TRACE_TOOL_CONVERT,SENSOR_OV5640_4734_112_2_18_0_31_58_1140,(uint8*)"d", level);
    return 0;
}

/******************************************************************************/
// Description:
// Global resource dependence: 
// Author: Tim.zhu
// Note:
//        
/******************************************************************************/
__align(4) LOCAL const SENSOR_REG_T ov5640_image_effect_tab[][5]=
{
    // effect normal
    {
        {0x5001, 0x7f},{0x5580, 0x00},{0xffff, 0xff},{0xffff, 0xff},{0xffff, 0xff}
    },
    //effect BLACKWHITE
    {
        {0x5001, 0xff},{0x5580, 0x18},{0x5583, 0x80},{0x5584, 0x80},{0xffff, 0xff}
    },
    // effect RED
    {
        {0x5001, 0xff},{0x5580, 0x18},{0x5583, 0x80},{0x5584, 0xc0},{0xffff, 0xff}
    },
    // effect GREEN
    {
        {0x5001, 0xff},{0x5580, 0x18},{0x5583, 0x60},{0x5584, 0x60},{0xffff, 0xff}
    },
    // effect  BLUE
    {
        {0x5001, 0xff},{0x5580, 0x18},{0x5583, 0xa0},{0x5584, 0x40},{0xffff, 0xff}
    },
    // effect  YELLOW
    {
        {0x5001, 0xff},{0x5580, 0x18},{0x5583, 0x40},{0x5584, 0xa0},{0xffff, 0xff}
    },  
    // effect NEGATIVE
    {         
        {0x5001, 0xff},{0x5580, 0x40},{0xffff, 0xff},{0xffff, 0xff},{0xffff, 0xff}
    },    
    //effect ANTIQUE
    {
        {0x5001, 0xff},{0x5580, 0x18},{0x5583, 0x40},{0x5584, 0xa0},{0xffff, 0xff}
    },

};
LOCAL uint32 _ov5640_set_image_effect(uint32 effect_type)
{
    uint16 i=0x00;
    SENSOR_REG_T_PTR sensor_reg_ptr=(SENSOR_REG_T_PTR)ov5640_image_effect_tab[effect_type];
    
    SCI_ASSERT(PNULL!=sensor_reg_ptr);   /*assert verified*/
    
    for(i=0x00; (0xffff!=sensor_reg_ptr[i].reg_addr)||(0xff!=sensor_reg_ptr[i].reg_value); i++)
    {
        Sensor_WriteReg(sensor_reg_ptr[i].reg_addr, sensor_reg_ptr[i].reg_value);
    }

    //SCI_TRACE_LOW:"SENSOR: _ov5640_set_image_effect = 0x%02x"
    SCI_TRACE_ID(TRACE_TOOL_CONVERT,SENSOR_OV5640_4791_112_2_18_0_31_58_1141,(uint8*)"d", effect_type);
    return 0;
}

/******************************************************************************/
// Description:
// Global resource dependence: 
// Author: Tim.zhu
// Note:
//        
/******************************************************************************/
__align(4) LOCAL const SENSOR_REG_T ov5640_ev_tab[][7]=
{
    {//level -3
        {0x3a0f, 0x20},{0x3a10, 0x18},{0x3a11, 0x41},{0x3a1b, 0x20},{0x3a1e, 0x18},{0x3a1f, 0x10},{0xffff, 0xff}
    },
    {//level -2
        {0x3a0f, 0x28},{0x3a10, 0x20},{0x3a11, 0x51},{0x3a1b, 0x28},{0x3a1e, 0x20},{0x3a1f, 0x10},{0xffff, 0xff}
    },
    {//level -1
        {0x3a0f, 0x30},{0x3a10, 0x28},{0x3a11, 0x61},{0x3a1b, 0x30},{0x3a1e, 0x28},{0x3a1f, 0x10},{0xffff, 0xff}
    },
    {//level 0
        {0x3a0f, 0x38},{0x3a10, 0x30},{0x3a11, 0x61},{0x3a1b, 0x38},{0x3a1e, 0x30},{0x3a1f, 0x10},{0xffff, 0xff}
    },
    {//level 1
        {0x3a0f, 0x40},{0x3a10, 0x38},{0x3a11, 0x71},{0x3a1b, 0x40},{0x3a1e, 0x38},{0x3a1f, 0x10},{0xffff, 0xff}
    },
    {//level 2
        {0x3a0f, 0x48},{0x3a10, 0x40},{0x3a11, 0x80},{0x3a1b, 0x48},{0x3a1e, 0x40},{0x3a1f, 0x20},{0xffff, 0xff}
    },
    {//level 3
        {0x3a0f, 0x50},{0x3a10, 0x48},{0x3a11, 0x90},{0x3a1b, 0x50},{0x3a1e, 0x48},{0x3a1f, 0x20},{0xffff, 0xff}
    }
};

LOCAL uint32 _ov5640_set_ev(uint32 level)
{
    SENSOR_REG_T_PTR sensor_reg_ptr=(SENSOR_REG_T_PTR)ov5640_ev_tab[level];
    uint16 i=0x00;
    
    SCI_ASSERT(PNULL!=sensor_reg_ptr);   /*assert verified*/
    
    for(i=0x00; (0xffff!=sensor_reg_ptr[i].reg_addr)||(0xFF!=sensor_reg_ptr[i].reg_value); i++)
    {
        Sensor_WriteReg(sensor_reg_ptr[i].reg_addr, sensor_reg_ptr[i].reg_value);
    }

    //SCI_TRACE_LOW:"SENSOR: _ov5640_set_ev = 0x%02x"
    SCI_TRACE_ID(TRACE_TOOL_CONVERT,SENSOR_OV5640_4837_112_2_18_0_31_58_1142,(uint8*)"d", level);
    return 0;
}
/******************************************************************************/
// Description: anti 50/60 hz banding flicker
// Global resource dependence: 
// Author: Tim.zhu
// Note:
//        
/******************************************************************************/
__align(4) LOCAL const SENSOR_REG_T ov5640_anti_banding_flicker_tab[][4]=
{
    {//50hz
        {0x3014, 0x84}, {0x3071, 0xeb}, {0x301c, 0x02}, {0xffff, 0xff}
    },
    {//60hz
        {0x3014, 0x04}, {0x3073, 0xc4}, {0x301d, 0x02}, {0xffff, 0xff}
    }
};    
LOCAL uint32 _ov5640_set_anti_flicker(uint32 mode)
{//65.6 us
    SENSOR_REG_T_PTR sensor_reg_ptr=(SENSOR_REG_T_PTR)ov5640_anti_banding_flicker_tab[mode];
    uint16 i=0x00;
    
    SCI_ASSERT(PNULL!=sensor_reg_ptr);   /*assert verified*/
    
    for(i=0x00; (0xffff!=sensor_reg_ptr[i].reg_addr)||(0xff!=sensor_reg_ptr[i].reg_value); i++)
    {
        Sensor_WriteReg(sensor_reg_ptr[i].reg_addr, sensor_reg_ptr[i].reg_value);
    }

    //SCI_TRACE_LOW:"SENSOR: _ov5640_set_anti_flicker = 0x%02x"
    SCI_TRACE_ID(TRACE_TOOL_CONVERT,SENSOR_OV5640_4866_112_2_18_0_31_58_1143,(uint8*)"d", mode);

    return 0;
}

/******************************************************************************/
// Description: set video mode
// Global resource dependence: 
// Author: Tim.zhu
// Note:
//        
/******************************************************************************/
__align(4) LOCAL const SENSOR_REG_T ov5640_video_mode_tab[][56]=
{
    {//nor mode
        {0x3012, 0x00},
        {0x3020, 0x01},
        {0x3021, 0x1d},
        {0x3022, 0x00},
        {0x3023, 0x0a},
        {0x3024, 0x08},
        {0x3025, 0x18},
        {0x3026, 0x06},
        {0x3027, 0x0c},
        {0x302a, 0x06},
        {0x302b, 0x20},
        {0x3075, 0x44},
        {0x300d, 0x00},
        {0x30d7, 0x10},
        {0x3069, 0x44},
        {0x303e, 0x01},
        {0x303f, 0x80},
        {0x3302, 0xcf},
        {0x335f, 0x68},
        {0x3360, 0x18},
        {0x3361, 0x0c},
        {0x3362, 0x68},
        {0x3363, 0x08},
        {0x3364, 0x04},
        {0x3403, 0x42},
        {0x3088, 0x08},
        {0x3089, 0x00},
        {0x308a, 0x06},
        {0x308b, 0x00},
        {0x300e, 0x39},
        {0x300f, 0x21},
        {0x3010, 0x20},
        {0x3011, 0x01},
        {0x304c, 0x81},
        //mclk=24MHz,pclk=22MHz,15fps
        {0x3302,0xef},//;QXGA->VGA
        {0x335f,0x68},
        {0x3360,0x18},
        {0x3361,0x0c},
        {0x3362,0x12},
        {0x3363,0x88},
        {0x3364,0xe4},
        {0x3403,0x42},
        {0x3088,0x02},
        {0x3089,0x80},
        {0x308a,0x01},
        {0x308b,0xe0},
        {0x304c,0x85}, 
        {0x300e,0x39},//;[Sensor.YUV.640x480.15]
        {0x300f,0xa1},
        {0x3011,0x00},
        {0x3010,0x81},  
        {0x302e,0x00},  
        {0x302d,0x00},
        {0x3071,0xeb},
        {0x301C,0x02},
        {0xffff, 0xff}    
    },
    {//video mode
        {0x3012, 0x10},
        {0x3023, 0x06},
        {0x3026, 0x03},
        {0x3027, 0x04},
        //{0x302a, 0x03},
        //{0x302b, 0x10},
        {0x302a, 0x04},
        {0x302b, 0x80},
        {0x3075, 0x24},
        {0x300d, 0x01},
        {0x30d7, 0x90},
        {0x3069, 0x04},
        {0x303e, 0x00},
        {0x303f, 0xc0},
        {0x3302, 0xef},
        {0x335f, 0x34},
        {0x3360, 0x0c},
        {0x3361, 0x04},
        {0x3362, 0x34},
        {0x3363, 0x08},
        {0x3364, 0x04},
        {0x3403, 0x42},
        {0x3088, 0x04},
        {0x3089, 0x00},
        {0x308a, 0x03},
        {0x308b, 0x00},
        {0x300e, 0x32},
        {0x300f, 0x21},
        {0x3010, 0x20},
        {0x3011, 0x01},
        {0x304c, 0x82},

        //;XGA->VGA
        {0x3302, 0xef},
        {0x335f, 0x34},
        {0x3360, 0x0c},
        {0x3361, 0x04},
        {0x3362, 0x12},
        {0x3363, 0x88},
        {0x3364, 0xe4},
        {0x3403, 0x42},
        {0x3088, 0x12},
        {0x3089, 0x80},
        {0x308a, 0x01},
        {0x308b, 0xe0},
        {0x304c, 0x85},

        //[Sensor.YUV.640x480.30]
        {0x300e, 0x39},
        {0x300f, 0xa1},
        {0x3011, 0x00},
        {0x3010, 0x81},
        {0x302e, 0x00},
        {0x302d, 0x00},
        {0x3071, 0xeb},
        {0x301C, 0x02},
        {0xffff, 0xff},
        {0xffff, 0xff},
        {0xffff, 0xff},
        {0xffff, 0xff},
        {0xffff, 0xff},            
        {0xffff, 0xff}
    },
    {//upcc mode
        {0x3012, 0x10},
        {0x3023, 0x06},
        {0x3026, 0x03},
        {0x3027, 0x04},
        //{0x302a, 0x03},
        //{0x302b, 0x10},
        {0x302a, 0x04},
        {0x302b, 0x80},
        {0x3075, 0x24},
        {0x300d, 0x01},
        {0x30d7, 0x90},
        {0x3069, 0x04},
        {0x303e, 0x00},
        {0x303f, 0xc0},
        {0x3302, 0xef},
        {0x335f, 0x34},
        {0x3360, 0x0c},
        {0x3361, 0x04},
        {0x3362, 0x34},
        {0x3363, 0x08},
        {0x3364, 0x04},
        {0x3403, 0x42},
        {0x3088, 0x04},
        {0x3089, 0x00},
        {0x308a, 0x03},
        {0x308b, 0x00},
        {0x300e, 0x32},
        {0x300f, 0x21},
        {0x3010, 0x20},
        {0x3011, 0x01},
        {0x304c, 0x82},

        //;XGA->VGA
        {0x3302, 0xef},
        {0x335f, 0x34},
        {0x3360, 0x0c},
        {0x3361, 0x04},
        {0x3362, 0x12},
        {0x3363, 0x88},
        {0x3364, 0xe4},
        {0x3403, 0x42},
        {0x3088, 0x12},
        {0x3089, 0x80},
        {0x308a, 0x01},
        {0x308b, 0xe0},
        {0x304c, 0x85},

        //[Sensor.YUV.640x480.30]
        {0x300e, 0x39},
        {0x300f, 0xa1},
        {0x3011, 0x00},
        {0x3010, 0x81},
        {0x302e, 0x00},
        {0x302d, 0x00},
        {0x3071, 0xeb},
        {0x301C, 0x02},
        {0xffff, 0xff},
        {0xffff, 0xff},
        {0xffff, 0xff},
        {0xffff, 0xff},
        {0xffff, 0xff},            
        {0xffff, 0xff}
    }
}; 

LOCAL uint32 _ov5640_set_video_mode(uint32 mode)
{//65.6 us
    SENSOR_REG_T_PTR sensor_reg_ptr=(SENSOR_REG_T_PTR)ov5640_video_mode_tab[mode];
    uint16 i=0x00;
    
    SCI_ASSERT(PNULL!=sensor_reg_ptr);   /*assert verified*/
    
    for(i=0x00; (0xffff!=sensor_reg_ptr[i].reg_addr)||(0xff!=sensor_reg_ptr[i].reg_value); i++)
    {
        Sensor_WriteReg(sensor_reg_ptr[i].reg_addr, sensor_reg_ptr[i].reg_value);
    }

    //SCI_TRACE_LOW:"SENSOR: _ov5640_set_video_mode = 0x%02x"
    SCI_TRACE_ID(TRACE_TOOL_CONVERT,SENSOR_OV5640_5079_112_2_18_0_31_58_1144,(uint8*)"d", mode);

    return 0;
}
/******************************************************************************/
// Description: set wb mode 
// Global resource dependence: 
// Author: Tim.zhu
// Note:
//        
/******************************************************************************/
__align(4) LOCAL const SENSOR_REG_T ov5640_awb_tab[][5]=

{
    //AUTO
    {
        {0x332b, 0x00}, {0xffff, 0xff}, {0xffff, 0xff}, {0xffff, 0xff}, {0xffff, 0xff}
    },    
    //INCANDESCENCE:
    {
        {0x332b, 0x08}, {0x33a7, 0x52}, {0x33a8, 0x40}, {0x33a9, 0x58}, {0xffff, 0xff}                  
    },
    //U30(auto)
    {
        {0x332b, 0x00}, {0xffff, 0xff}, {0xffff, 0xff}, {0xffff, 0xff}, {0xffff, 0xff}         
    },  
    //CWF equal to flourescent(auto)
    {
        {0x332b, 0x00}, {0xffff, 0xff}, {0xffff, 0xff}, {0xffff, 0xff}, {0xffff, 0xff}         
    },    
    //FLUORESCENT:
    {
        {0x332b, 0x08}, {0x33a7, 0x44}, {0x33a8, 0x40}, {0x33a9, 0x70}, {0xffff, 0xff}      
    },
    //SUN:
    {
        {0x332b, 0x08}, {0x33a7, 0x5e}, {0x33a8, 0x40}, {0x33a9, 0x46}, {0xffff, 0xff}          
    },
    //CLOUD:
    {
        {0x332b, 0x08}, {0x33a7, 0x68}, {0x33a8, 0x40}, {0x33a9, 0x4e}, {0xffff, 0xff}   
    }
};

LOCAL uint32 _ov5640_set_awb(uint32 mode)
{
    uint16 i=0x00;
    SENSOR_REG_T_PTR sensor_reg_ptr=(SENSOR_REG_T_PTR)ov5640_awb_tab[mode];
    
    SCI_ASSERT(PNULL!=sensor_reg_ptr);   /*assert verified*/
    
    for(i=0; (0xffff!=sensor_reg_ptr[i].reg_addr)||(0xFF!=sensor_reg_ptr[i].reg_value); i++)
    {
        Sensor_WriteReg(sensor_reg_ptr[i].reg_addr, sensor_reg_ptr[i].reg_value);
    }

    Sensor_SetSensorExifInfo(SENSOR_EXIF_CTRL_LIGHTSOURCE, (uint32)mode);

    //SCI_TRACE_LOW:"SENSOR: _ov5640_set_awb = 0x%02x"
    SCI_TRACE_ID(TRACE_TOOL_CONVERT,SENSOR_OV5640_5135_112_2_18_0_31_59_1145,(uint8*)"d", mode);
    return 0;
}

/******************************************************************************/
// Description:
// Global resource dependence: 
// Author: Tim.zhu
// Note:
//        mode 0:normal;   1:night 
/******************************************************************************/
__align(4) LOCAL const SENSOR_REG_T ov5640_work_mode_tab[][6]=
{

    {    //normal fix 15fps
            {0x3014, 0x84},   
            {0x302d, 0x00},
            {0x302e, 0x00},                    
            {0xFFFF, 0xFF},
            {0xFFFF, 0xFF},
            {0xFFFF, 0xFF}            
    },
    {    //night min 5-15fps
            {0x3014, 0x8c},
            {0x3016, 0x92},                 
            {0x3015, 0x22}, 
            {0x302d, 0x00},
            {0x302e, 0x00},                          
            {0xFFFF, 0xFF}
    }
};

LOCAL uint32 _ov5640_set_work_mode(uint32 mode)
{
    uint16 i=0x00;
    SENSOR_REG_T_PTR sensor_reg_ptr=(SENSOR_REG_T_PTR)ov5640_work_mode_tab[mode];
    
    SCI_ASSERT(PNULL != sensor_reg_ptr);   /*assert verified*/
    
    for(i=0; (0xffff!=sensor_reg_ptr[i].reg_addr)||(0xFF!=sensor_reg_ptr[i].reg_value); i++)
    {
        Sensor_WriteReg(sensor_reg_ptr[i].reg_addr, sensor_reg_ptr[i].reg_value);
    }

    Sensor_SetSensorExifInfo(SENSOR_EXIF_CTRL_SCENECAPTURETYPE, (uint32)mode);

    //SCI_TRACE_LOW:"SENSOR: _ov5640_set_work_mode: mode = %d"
    SCI_TRACE_ID(TRACE_TOOL_CONVERT,SENSOR_OV5640_5179_112_2_18_0_31_59_1146,(uint8*)"d", mode);
    return 0;
}


/******************************************************************************/
// Description:
// Global resource dependence: 
// Author: Tim.zhu
// Note:
//        
/******************************************************************************/
LOCAL uint32 _ov5640_BeforeSnapshot(uint32 param)
{
    #define Capture_Framerate  150
    #define g_Preview_FrameRate 300

    uint8 ExposureLow,ExposureMid,ExposureHigh;
    uint8 ret_l,ret_m,ret_h,Gain,Lines_10ms;
    uint16 ulCapture_Exposure,Preview_Maxlines;
    uint32 Capture_MaxLines,g_preview_exposure;

    if(SENSOR_MODE_PREVIEW_ONE>=param) 
    {        
        return SCI_SUCCESS;
    }

    Sensor_WriteReg(0x3503,0x07);

    ret_h = ret_m = ret_l = 0;
    g_preview_exposure = 0;
    ret_h=(uint8)Sensor_ReadReg(0x3500);
    ret_m=(uint8)Sensor_ReadReg(0x3501);
    ret_l=(uint8)Sensor_ReadReg(0x3502);
    g_preview_exposure = (ret_h << 12) + (ret_m << 4) + (ret_l >> 4);

    ret_h = ret_m = ret_l = 0;
    Preview_Maxlines = 0;
    ret_h=(uint8)Sensor_ReadReg(0x380e);
    ret_l=(uint8)Sensor_ReadReg(0x380f);
    Preview_Maxlines = (ret_h << 8) + ret_l;

    //Read back AGC Gain for preview
    Gain=(uint8)Sensor_ReadReg(0x350b);

    Sensor_SetMode(param);

    ret_h = ret_m = ret_l = 0;
    ret_h=(uint8)Sensor_ReadReg(0x380e);
    ret_l=(uint8)Sensor_ReadReg(0x380f);
    Capture_MaxLines=(ret_h<<8)+ret_l;

    Lines_10ms = (uint8)(Capture_Framerate * Capture_MaxLines/12000);

    if(Preview_Maxlines==0)
    {
        Preview_Maxlines=1;
    }

   // ulCapture_Exposure=(g_preview_exposure*(Capture_Framerate)*(Capture_MaxLines))/(((Preview_Maxlines)*(g_Preview_FrameRate))); //over writeen agin

    ulCapture_Exposure=g_preview_exposure;

    if(Gain>32)
    {
        Gain=Gain / 2;
        ulCapture_Exposure = 2 * g_preview_exposure;
    }

    ExposureLow=((unsigned char)ulCapture_Exposure)<<4;
    ExposureMid=(unsigned char)(ulCapture_Exposure >> 4) & 0xff;
    ExposureHigh=(unsigned char)(ulCapture_Exposure >> 12);

    //m_iWrite0x3502=ExposureLow;
    Sensor_WriteReg(0x3502, ExposureLow);
    //m_iWrite0x3501=ExposureMid;
    Sensor_WriteReg(0x3501, ExposureMid);
    //m_iWrite0x3500=ExposureHigh;
    Sensor_WriteReg(0x3500, ExposureHigh);
    //m_iWrite0x350b=Gain;
    Sensor_WriteReg(0x350b, Gain + 1);
    SCI_Sleep(100);
    Sensor_WriteReg(0x350b, Gain);

    Sensor_SetSensorExifInfo(SENSOR_EXIF_CTRL_EXPOSURETIME, (uint32)ulCapture_Exposure);

    return SCI_SUCCESS;
}

/******************************************************************************/
// Description:
// Global resource dependence: 
// Author: Tim.zhu
// Note:
//        
/******************************************************************************/
LOCAL uint32 _ov5640_check_image_format_support(uint32 param) 
{
    uint32 ret_val = SCI_ERROR;

    switch(param)
    {
        case SENSOR_IMAGE_FORMAT_YUV422:
            ret_val = SCI_SUCCESS;
            break;

        case SENSOR_IMAGE_FORMAT_JPEG:
            ret_val = SCI_SUCCESS;
            break;

        default:
            break;
    }

    return ret_val;
}

/******************************************************************************/
// Description:
// Global resource dependence: 
// Author: Tim.zhu
// Note:
//        
/******************************************************************************/
LOCAL uint32 _ov5640_pick_out_jpeg_stream(uint32 param)
{
    uint8* p_frame=((DCAMERA_SNAPSHOT_RETURN_PARAM_T*)param)->return_data_addr;
    uint32 buf_len=((DCAMERA_SNAPSHOT_RETURN_PARAM_T*)param)->return_data_len;
    uint32 i=0x00;
    
    //SCI_TRACE_LOW:"SENSOR: ov5640 jpeg capture head: 0x%x, 0x%x"
    SCI_TRACE_ID(TRACE_TOOL_CONVERT,SENSOR_OV5640_5303_112_2_18_0_31_59_1147,(uint8*)"dd", *((uint8*)p_frame), *((uint8*)p_frame + 1));

    /* Find the tail position */
    for(i=0x00; i<buf_len; i++)
    {
        #define TAIL_VAL 0xffd9
        uint8* p_cur_val = (uint8*)p_frame;
        
        uint16 tail_val = ((p_cur_val[i]<<8) | p_cur_val[i+1]);
        
        if(TAIL_VAL == tail_val)
        {
            i += 2;
            break;
        }
    }

    /* check if the tail is found */
    if(i < buf_len)
    {
        //SCI_TRACE_LOW:"SENSOR: ov5640 Found the jpeg tail at %d: 0x%x 0x%x"
        SCI_TRACE_ID(TRACE_TOOL_CONVERT,SENSOR_OV5640_5323_112_2_18_0_31_59_1148,(uint8*)"ddd", i+1, *((uint8*)p_frame + i), *((uint8*)p_frame + i + 1));
    }
    else
    {
        //SCI_TRACE_LOW:"SENSOR: ov5640 can not find the jpeg tail: %d"
        SCI_TRACE_ID(TRACE_TOOL_CONVERT,SENSOR_OV5640_5327_112_2_18_0_31_59_1149,(uint8*)"d", i);
        i=0x00;
    }

    return i;
}

/******************************************************************************/
// Description:
// Global resource dependence: 
// Author: Tim.zhu
// Note:
//        
/******************************************************************************/
LOCAL uint32 _ov5640_chang_image_format(uint32 param)
{
    SENSOR_REG_TAB_INFO_T st_yuv422_reg_table_info = { ADDR_AND_LEN_OF_ARRAY(ov5640_640X480),0,0,0,0};
    uint32 ret_val = SCI_ERROR;

    switch(param){
    case SENSOR_IMAGE_FORMAT_YUV422:
    //SCI_TRACE_LOW:"SENSOR: ov5640  chang_image_format  YUV422"
    SCI_TRACE_ID(TRACE_TOOL_CONVERT,SENSOR_OV5640_5346_112_2_18_0_31_59_1150,(uint8*)"");
        ret_val = Sensor_SendRegTabToSensor(&st_yuv422_reg_table_info);
        break;

    case SENSOR_IMAGE_FORMAT_JPEG:
        //SCI_TRACE_LOW:"SENSOR: ov5640  chang_image_format  jpg"
        SCI_TRACE_ID(TRACE_TOOL_CONVERT,SENSOR_OV5640_5351_112_2_18_0_31_59_1151,(uint8*)"");
        ret_val = SCI_ERROR;//Sensor_SendRegTabToSensor(&st_jpeg_reg_table_info);
        break;

    default:
        break;
    }

    return ret_val;
}

/******************************************************************************/
// Description:
// Global resource dependence: 
// Author: Tim.zhu
// Note:
//        
/******************************************************************************/
LOCAL uint32 _ov5640_after_snapshot(uint32 param)
{
    //SCI_TRACE_LOW:"SENSOR: _ov5640_after_snapshot =%d"
    SCI_TRACE_ID(TRACE_TOOL_CONVERT,SENSOR_OV5640_5369_112_2_18_0_31_59_1152,(uint8*)"d",param);

    Sensor_SetMode(param);

    return SCI_SUCCESS;
}

/******************************************************************************/
// Description:
// Global resource dependence: 
// Author: Tim.zhu
// Note:
//        
/******************************************************************************/
LOCAL uint32 _ov5640_LoadAfFirmware(uint32 param)
{
    uint32 rtn=SCI_SUCCESS;
    uint32 i=0x00;
    uint32 reg_data_num=0x00;
    uint32 firmware_len=0x00;
    uint8* firmware_ptr=NULL;
    int32 dev_handler=0;
    I2C_DEV dev={0x00};
    uint8 reg_addr[2]={0x80,0x00};
        
    //SCI_TRACE_LOW:"SENSOR: ov5640_after_snapshot =%d"
    SCI_TRACE_ID(TRACE_TOOL_CONVERT,SENSOR_OV5640_5392_112_2_18_0_31_59_1153,(uint8*)"d",param);

    dev.id=0x00;
    dev.freq=(400*1000);
    dev.bus=0x00;
    dev.slave_addr=0x78;
    dev.reg_addr_num=0x02;
    dev.check_ack=0x01;
    dev.no_stop=0x00;

    dev_handler=I2C_HAL_Open(&dev);

    if(-1!=dev_handler)
    {
        Sensor_WriteReg(0x3000, 0x20);

        firmware_ptr=ov5640_af_firmware;  /*lint !e605*/
        firmware_len=sizeof(ov5640_af_firmware);
        
        for(i=0x00; ;i++)
        {
            if(0x100<firmware_len)
            {
                reg_data_num=0x100;
            }
            else
            {
                reg_data_num=firmware_len;
            }
            
            I2C_HAL_Write(dev_handler, reg_addr, firmware_ptr, reg_data_num);

            if(0x100>=firmware_len)
            {
                break;
            }

            firmware_ptr+=0x100;
            firmware_len-=0x100;
            reg_addr[0]++;
        }

        Sensor_WriteReg(0x3022, 0x00);
        Sensor_WriteReg(0x3023, 0x00);
        Sensor_WriteReg(0x3024, 0x00);
        Sensor_WriteReg(0x3025, 0x00);
        Sensor_WriteReg(0x3026, 0x00);
        Sensor_WriteReg(0x3027, 0x00);
        Sensor_WriteReg(0x3028, 0x00);
        Sensor_WriteReg(0x3029, 0xFF);
        Sensor_WriteReg(0x3000, 0x00);
    
        if(0x00!=I2C_HAL_Close(dev_handler))
        {
            //SCI_TRACE_LOW:"SENSOR: _ov5640_LoadAfFirmware i2c close error"
            SCI_TRACE_ID(TRACE_TOOL_CONVERT,SENSOR_OV5640_5446_112_2_18_0_31_59_1154,(uint8*)"");
            rtn=SCI_ERROR;
        }
        else
        {
            //SCI_TRACE_LOW:"SENSOR: _ov5640_LoadAfFirmware i2c close success"
            SCI_TRACE_ID(TRACE_TOOL_CONVERT,SENSOR_OV5640_5451_112_2_18_0_31_59_1155,(uint8*)"");
        }
    }
    else
    {
        //SCI_TRACE_LOW:"SENSOR: _ov5640_LoadAfFirmware i2c init error"
        SCI_TRACE_ID(TRACE_TOOL_CONVERT,SENSOR_OV5640_5456_112_2_18_0_31_59_1156,(uint8*)"");
        rtn=SCI_ERROR;
    }

    return rtn;
}

/******************************************************************************/
// Description:
// Global resource dependence: 
// Author: Tim.zhu
// Note:
//        
/******************************************************************************/
LOCAL uint32 _ov5640_MatchZone(SENSOR_EXT_FUN_T_PTR param_ptr)
{
    SENSOR_RECT_T zone_rect={0x00}; 
    uint32 rtn=SCI_SUCCESS;

    switch(param_ptr->cmd)
    {
        case SENSOR_EXT_FOCUS_START:
        {
            switch(param_ptr->param)
            {
                case SENSOR_EXT_FOCUS_ZONE:
                {
                    zone_rect.w=FOCUS_ZONE_W;
                    zone_rect.h=FOCUS_ZONE_H;
                    break;
                }
                default :
                    break;
            }
            break;
        }
        case SENSOR_EXT_EXPOSURE_START:
        {
            switch(param_ptr->param)
            {
                case SENSOR_EXT_EXPOSURE_ZONE:
                {
                    zone_rect.w=EXPOSURE_ZONE_W;
                    zone_rect.h=EXPOSURE_ZONE_H;
                    break;
                }
                default :
                    break;
            }
            break;
        }
        default :
            break;
    }

    if((0x00!=s_ov5640_resolution_Tab_YUV[SENSOR_MODE_PREVIEW_ONE].width)
        &&(0x00!=s_ov5640_resolution_Tab_YUV[SENSOR_MODE_PREVIEW_ONE].height)
        &&(0x00!=zone_rect.w)
        &&(0x00!=zone_rect.h))
    {
        param_ptr->zone.x=(zone_rect.w*param_ptr->zone.x)/s_ov5640_resolution_Tab_YUV[SENSOR_MODE_PREVIEW_ONE].width;
        param_ptr->zone.y=(zone_rect.h*param_ptr->zone.y)/s_ov5640_resolution_Tab_YUV[SENSOR_MODE_PREVIEW_ONE].height;
    }
    else
    {
        //SCI_TRACE_LOW:"SENSOR: _ov5640_MatchZone, w:%d, h:%d error"
        SCI_TRACE_ID(TRACE_TOOL_CONVERT,SENSOR_OV5640_5519_112_2_18_0_31_59_1157,(uint8*)"dd",zone_rect.w,zone_rect.h);
        rtn=SCI_ERROR;
    }

    //SCI_TRACE_LOW:"SENSOR: _ov5640_MatchZone, x:%d, y:%d"
    SCI_TRACE_ID(TRACE_TOOL_CONVERT,SENSOR_OV5640_5523_112_2_18_0_31_59_1158,(uint8*)"dd",param_ptr->zone.x,param_ptr->zone.y);

    return rtn;
}

/******************************************************************************/
// Description:
// Global resource dependence: 
// Author: Tim.zhu
// Note:
//        
/******************************************************************************/
LOCAL uint32 _ov5640_AutoFocusTrig(SENSOR_EXT_FUN_T_PTR param_ptr)
{
    uint32 rtn=SCI_SUCCESS;
    uint16 i=0x03;
    uint16 reg_value=0x00;

    //SCI_TRACE_LOW:"SENSOR: _ov5640_AutoFocusTrig"
    SCI_TRACE_ID(TRACE_TOOL_CONVERT,SENSOR_OV5640_5539_112_2_18_0_31_59_1159,(uint8*)"");

    Sensor_WriteReg(CMD_ACK, 0x01);
    Sensor_WriteReg(CMD_MAIN, 0x03);

    do
    {
        if(0x00==i)
        {
            //SCI_TRACE_LOW:"SENSOR: _ov5640_AutoFocusTrig error!"
            SCI_TRACE_ID(TRACE_TOOL_CONVERT,SENSOR_OV5640_5548_112_2_18_0_31_59_1160,(uint8*)"");
            rtn=SCI_ERROR;
            break ;
        }
        SCI_Sleep(300);        
        reg_value=Sensor_ReadReg(CMD_ACK);
        i--;
    }while(0x00!=reg_value);

    if(SCI_SUCCESS==rtn)
    {
        reg_value=Sensor_ReadReg(CMD_PARAM4);  
        if(0x00==reg_value)
        {
            //SCI_TRACE_LOW:"SENSOR: _ov5640_AutoFocusTrig fail!"
            SCI_TRACE_ID(TRACE_TOOL_CONVERT,SENSOR_OV5640_5562_112_2_18_0_31_59_1161,(uint8*)"");
            rtn=SCI_ERROR;
        }
    }

    return rtn;
}

/******************************************************************************/
// Description:
// Global resource dependence: 
// Author: Tim.zhu
// Note:
//        
/******************************************************************************/
LOCAL uint32 _ov5640_AutoFocusZone(SENSOR_EXT_FUN_T_PTR param_ptr)
{
    uint32 rtn=SCI_SUCCESS;
    SENSOR_EXT_FUN_T_PTR ext_ptr=(SENSOR_EXT_FUN_T_PTR)param_ptr;
    uint32 i=0x03;
    uint16 reg_value=0x00;

    //SCI_TRACE_LOW:"SENSOR: _ov5640_AutoFocusZone: %d, %d"
    SCI_TRACE_ID(TRACE_TOOL_CONVERT,SENSOR_OV5640_5582_112_2_18_0_31_59_1162,(uint8*)"dd",ext_ptr->zone.x,ext_ptr->zone.y);

    rtn=_ov5640_MatchZone(ext_ptr);

    if(SCI_SUCCESS==rtn)
    {
        Sensor_WriteReg(CMD_PARAM0, ext_ptr->zone.x);
        Sensor_WriteReg(CMD_PARAM1, ext_ptr->zone.y);
        
        Sensor_WriteReg(CMD_ACK, 0x01);
        Sensor_WriteReg(CMD_MAIN, 0x81);

        SCI_Sleep(10);

        Sensor_WriteReg(CMD_ACK, 0x01);
        Sensor_WriteReg(CMD_MAIN, 0x03);

        do
        {
            if(0x00==i)
            {
                //SCI_TRACE_LOW:"SENSOR: _ov5640_AutoFocusZone error!"
                SCI_TRACE_ID(TRACE_TOOL_CONVERT,SENSOR_OV5640_5603_112_2_18_0_32_0_1163,(uint8*)"");
                rtn=SCI_ERROR;
                break ;
            }
            SCI_Sleep(300);        
            reg_value=Sensor_ReadReg(CMD_ACK);
            i--;
        }while(0x00!=reg_value);

    }

    return rtn;
}

/******************************************************************************/
// Description:
// Global resource dependence: 
// Author: Tim.zhu
// Note:
//        
/******************************************************************************/
LOCAL uint32 _ov5640_StartAutoFocus(uint32 param)
{
    uint32 rtn=SCI_SUCCESS;
    SENSOR_EXT_FUN_T_PTR ext_ptr=(SENSOR_EXT_FUN_T_PTR)param;

    //SCI_TRACE_LOW:"SENSOR: _ov5640_StartAutoFocus param =%d"
    SCI_TRACE_ID(TRACE_TOOL_CONVERT,SENSOR_OV5640_5627_112_2_18_0_32_0_1164,(uint8*)"d",ext_ptr->param);

    switch(ext_ptr->param)
    {
        case SENSOR_EXT_FOCUS_TRIG:
        {
            rtn=_ov5640_AutoFocusTrig(ext_ptr);
            break;
        }
        case SENSOR_EXT_FOCUS_ZONE:
        {
            rtn=_ov5640_AutoFocusZone(ext_ptr);
            break;
        }
        default :
            break;
    }

    return rtn;
}

/******************************************************************************/
// Description:
// Global resource dependence: 
// Author: Tim.zhu
// Note:
//        
/******************************************************************************/
LOCAL uint32 _ov5640_ExposureAuto(void)
{
    uint32 rtn=SCI_SUCCESS;

    //SCI_TRACE_LOW:"SENSOR: _ov5640_ExposureAuto"
    SCI_TRACE_ID(TRACE_TOOL_CONVERT,SENSOR_OV5640_5657_112_2_18_0_32_0_1165,(uint8*)"");

    Sensor_WriteReg(0x501d, 0x00);

    return rtn;
}

/******************************************************************************/
// Description:
// Global resource dependence: 
// Author: Tim.zhu
// Note:
//        
/******************************************************************************/
LOCAL uint32 _ov5640_ExposureZone(SENSOR_EXT_FUN_T_PTR param_ptr)
{
    uint32 rtn=SCI_SUCCESS;
    SENSOR_EXT_FUN_T_PTR ext_ptr=(SENSOR_EXT_FUN_T_PTR)param_ptr;
    uint16 reg_value=0x00;

    //SCI_TRACE_LOW:"SENSOR: _ov5640_ExposureZone: %d, %d"
    SCI_TRACE_ID(TRACE_TOOL_CONVERT,SENSOR_OV5640_5675_112_2_18_0_32_0_1166,(uint8*)"dd",ext_ptr->zone.x,ext_ptr->zone.y);

    rtn=_ov5640_MatchZone(ext_ptr);

    if(SCI_SUCCESS==rtn)
    {
        // h zone
        if(0x00<(ext_ptr->zone.x-(EXPOSURE_ZONE_W/0x08)))
        {
            ext_ptr->zone.x-=(EXPOSURE_ZONE_W/0x08);
        }
        else
        {
            ext_ptr->zone.x=0x00;
        }
        ext_ptr->zone.w=EXPOSURE_ZONE_W/0x04;
        if(EXPOSURE_ZONE_W<(ext_ptr->zone.x+ext_ptr->zone.w))
        {
            ext_ptr->zone.x=EXPOSURE_ZONE_W-(EXPOSURE_ZONE_W/0x04);
        }

        // v zone
        if(0x00<(ext_ptr->zone.y-(EXPOSURE_ZONE_H/0x08)))
        {
            ext_ptr->zone.y-=(EXPOSURE_ZONE_H/0x08);
        }
        else
        {
            ext_ptr->zone.y=0x00;
        }
        ext_ptr->zone.h=EXPOSURE_ZONE_H/0x04;
        if(EXPOSURE_ZONE_H<(ext_ptr->zone.y+ext_ptr->zone.h))
        {
            ext_ptr->zone.y=EXPOSURE_ZONE_H-(EXPOSURE_ZONE_H/0x04);
        }

        //SCI_TRACE_LOW:"SENSOR: _ov5640_ExposureZone: %d, %d, %d, %d"
        SCI_TRACE_ID(TRACE_TOOL_CONVERT,SENSOR_OV5640_5711_112_2_18_0_32_0_1167,(uint8*)"dddd",ext_ptr->zone.x,ext_ptr->zone.y,ext_ptr->zone.w,ext_ptr->zone.h);

        reg_value=((ext_ptr->zone.x>>0x08)&0x07);        
        Sensor_WriteReg(0x5680, reg_value);
        reg_value=(ext_ptr->zone.x&0xff);
        Sensor_WriteReg(0x5681, reg_value);

        reg_value=((ext_ptr->zone.y>>0x08)&0x07);
        Sensor_WriteReg(0x5682, reg_value);
        reg_value=(ext_ptr->zone.y&0xff);
        Sensor_WriteReg(0x5683, reg_value);

        reg_value=((ext_ptr->zone.w>>0x08)&0x0f);
        Sensor_WriteReg(0x5684, reg_value);
        reg_value=(ext_ptr->zone.w&0xff);
        Sensor_WriteReg(0x5685, reg_value);

        reg_value=((ext_ptr->zone.h>>0x08)&0x0f);
        Sensor_WriteReg(0x5686, reg_value);
        reg_value=(ext_ptr->zone.h&0xff);
        Sensor_WriteReg(0x5687, reg_value);

        Sensor_WriteReg(0x501d, 0x10);

    }

    return rtn;
}

/******************************************************************************/
// Description:
// Global resource dependence: 
// Author: Tim.zhu
// Note:
//        
/******************************************************************************/
LOCAL uint32 _ov5640_StartExposure(uint32 param)
{
    uint32 rtn=SCI_SUCCESS;
    SENSOR_EXT_FUN_T_PTR ext_ptr=(SENSOR_EXT_FUN_T_PTR)param;

    //SCI_TRACE_LOW:"SENSOR: _ov5640_StartExposure param =%d"
    SCI_TRACE_ID(TRACE_TOOL_CONVERT,SENSOR_OV5640_5750_112_2_18_0_32_0_1168,(uint8*)"d",ext_ptr->param);

    switch(ext_ptr->param)
    {
        case SENSOR_EXT_EXPOSURE_AUTO:
        {
            rtn=_ov5640_ExposureAuto();
            break;
        }
        case SENSOR_EXT_EXPOSURE_ZONE:
        {
            rtn=_ov5640_ExposureZone(ext_ptr);
            break;
        }
        default :
            break;
    }

    return rtn;
}

/******************************************************************************/
// Description:
// Global resource dependence: 
// Author: Tim.zhu
// Note:
/******************************************************************************/
LOCAL uint32 _ov5640_ExtFunc(uint32 ctl_param)
{
    uint32 rtn=SCI_SUCCESS;
    SENSOR_EXT_FUN_T_PTR ext_ptr=(SENSOR_EXT_FUN_T_PTR)ctl_param;
    //SCI_TRACE_LOW:"SENSOR: _ov5640_ExtFunc cmd:0x%x "
    SCI_TRACE_ID(TRACE_TOOL_CONVERT,SENSOR_OV5640_5779_112_2_18_0_32_0_1169,(uint8*)"d",ext_ptr->cmd);
    switch(ext_ptr->cmd)
    {
        case SENSOR_EXT_FUNC_INIT:
        {
            rtn=_ov5640_LoadAfFirmware(ctl_param);
            break;
        }    
        case SENSOR_EXT_FOCUS_START:
        {
            rtn=_ov5640_StartAutoFocus(ctl_param);
            break;
        }
        case SENSOR_EXT_EXPOSURE_START:
        {
            rtn=_ov5640_StartExposure(ctl_param);
            break;
        }
        default :
            break;
    }
    
    return rtn;
}

/**---------------------------------------------------------------------------*
 **                         Compiler Flag                                     *
 **---------------------------------------------------------------------------*/    
#ifdef __cplusplus
}
#endif
