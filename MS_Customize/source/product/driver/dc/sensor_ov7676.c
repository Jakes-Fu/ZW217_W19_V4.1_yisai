/******************************************************************************
 ** File Name:    Sensor_OV7676.c                                             *
 ** Author:       Eddy.wei                                                    *
 ** Date:         2016/05/02                                                  *
 ** Platform:     SC6531EFM                                                      *
 ** Copyright:    Spreadtrum All Rights Reserved.                             *
 ** Description:  implementation of digital camera register interface         *
 ******************************************************************************

 ******************************************************************************
 **                        Edit History                                       *
 ** ------------------------------------------------------------------------- *
 ** DATE             NAME             DESCRIPTION                             *
 ** 2016/05/02   Ededy.wei       Fristly Released                             *
 ******************************************************************************/
#ifndef _OV7676_C_
#define _OV7676_C_

#include "ms_customize_trc.h"
#include "sensor_cfg.h"
#include "sensor_drv.h"
//#include "i2c_drv.h"
#include "os_api.h"
#include "chip.h"
#include "dal_dcamera.h"

/**---------------------------------------------------------------------------*
 **                         Compiler Flag                                     *
 **---------------------------------------------------------------------------*/
#ifdef   __cplusplus
    extern   "C" 
    {
#endif
/*lint -save -e785 */
/**---------------------------------------------------------------------------*
 **                         Const variables                                   *
 **---------------------------------------------------------------------------*/
#define OV7676_I2C_ADDR_W               0x78
#define OV7676_I2C_ADDR_R                0x79

/**---------------------------------------------------------------------------*
     OV7676 SUPPORT 8 SERIAL MODE:
     PACKET_1BIT, PACKET_2BIT, PACKET_4BIT
     PACKET_DDR_1BIT, PACKET_DDR_2BIT, PACKET_DDR_4BIT
     OV_SPI_1BIT, OV_SPI_2BIT
 **---------------------------------------------------------------------------*/

//#define OV7676_OUTPUT_MODE_CCIR601_8BIT
//#define OV7676_OUTPUT_MODE_PACKET_1BIT
//#define OV7676_OUTPUT_MODE_PACKET_2BIT
//#define OV7676_OUTPUT_MODE_PACKET_4BIT
//#define OV7676_OUTPUT_MODE_PACKET_DDR_1BIT
#define OV7676_OUTPUT_MODE_PACKET_DDR_2BIT 
//#define OV7676_OUTPUT_MODE_PACKET_DDR_4BIT
//#define OV7676_OUTPUT_MODE_OV_SPI_1BIT
//#define OV7676_OUTPUT_MODE_OV_SPI_2BIT

/**---------------------------------------------------------------------------*
 **                     Local Function Prototypes                             *
 **---------------------------------------------------------------------------*/
LOCAL void   OV7676_Write_Group_Regs(SENSOR_REG_T* sensor_reg_ptr );
LOCAL uint32 OV7676_Power_On(uint32 power_on);
LOCAL uint32 OV7676_Identify(uint32 param);
LOCAL uint32 OV7676_Set_Brightness(uint32 level);
LOCAL uint32 OV7676_Set_Contrast(uint32 level);
LOCAL uint32 OV7676_Set_Image_Effect(uint32 effect_type);
LOCAL uint32 OV7676_Set_Ev(uint32 level);
LOCAL uint32 OV7676_Set_Anti_Flicker(uint32 mode);
LOCAL uint32 OV7676_Set_Preview_Mode(uint32 preview_mode);
LOCAL uint32 OV7676_Set_AWB(uint32 mode);
LOCAL uint32 OV7676_Set_Video_Mode(uint32 mode);
LOCAL uint32 OV7676_Before_Snapshot(uint32 para);
LOCAL uint32 OV7676_After_Snapshot(uint32 para);
/**---------------------------------------------------------------------------*
 **                         Local Variables                                  *
 **---------------------------------------------------------------------------*/
#ifdef OV7676_OUTPUT_MODE_CCIR601_8BIT
__align(4) const SENSOR_REG_T OV7676_YUV_640X480[] = {
{0x103, 0x01},
//;5c, 0x01, 0xad},
//;5c, 0x02, 0xad},
{0x3001, 0x07},
{0x3002, 0xff},
{0x301e, 0x09},
{0x3080, 0x02},
{0x3081, 0x10},
{0x3082, 0x01},
{0x3083, 0x01},
{0x3084, 0x01},
{0x3103, 0x01},//01},
{0x3503, 0x00},
{0x3600, 0x03},
{0x3602, 0x0e},
{0x3612, 0x0d},
{0x3614, 0x53},
{0x37c0, 0x07},
{0x3800, 0x00},
{0x3801, 0x00},
{0x3802, 0x00},
{0x3803, 0x00},
{0x3804, 0x02},
{0x3805, 0x87},
{0x3806, 0x01},
{0x3807, 0xe7},
{0x3808, 0x02},
{0x3809, 0x80},
{0x380a, 0x01},
{0x380b, 0xe0},
{0x380c, 0x03},
{0x380d, 0x12},
{0x380e, 0x01},
{0x380f, 0xfd},
{0x3810, 0x00},
{0x3811, 0x04},
{0x3812, 0x00},
{0x3813, 0x04},
{0x3820, 0x10},
{0x3821, 0x00},
{0x3a06, 0x00},
{0x3a07, 0xa1},
{0x3a08, 0x00},
{0x3a09, 0x86},
{0x3a0e, 0x01},
{0x3a0f, 0xe3},
{0x3a10, 0x01},
{0x3a11, 0xfc},
{0x4008, 0x00},
{0x4009, 0x03},
{0x4011, 0xf0},
{0x4013, 0x05},
{0x4014, 0x05},
{0x4015, 0x05},
{0x4017, 0x08},
{0x4300, 0x03},
{0x4301, 0xff},
{0x4304, 0x03},
{0x4305, 0xff},
{0x4308, 0x04},
{0x4f00, 0x80},
{0x4f01, 0x10},//10},
{0x4f02, 0x00},//a0},
{0x5000, 0xff},
{0x5001, 0x3f},
{0x5002, 0xc8},
{0x5080, 0x00},
{0x5201, 0x05},
{0x5204, 0x00},
{0x5205, 0x14},
{0x5206, 0x00},
{0x5207, 0xfe},
{0x5208, 0x00},
{0x5209, 0x54},
{0x520a, 0x01},
{0x520b, 0x31},
{0x520c, 0x00},
{0x520d, 0x22},
{0x520e, 0x01},
{0x520f, 0xed},
{0x5210, 0x10},
{0x5211, 0x05},
{0x5228, 0x00},
{0x5229, 0x5f},
{0x522c, 0x01},
{0x522d, 0x22},
{0x522a, 0x00},
{0x522b, 0xe0},
{0x522e, 0x01},
{0x522f, 0x6e},
{0x5230, 0x70},
{0x550d, 0x00},// 0x;re-cursive, 0xoff},
{0x5500, 0x0b},// 0x;2x, 0x, 0x--, 0xgain4x},
{0x5501, 0x1b},// 0x;9x, 0x, 0x--, 0xgain2x},
{0x5502, 0x22},// 0x;edge, 0xoffset1},
{0x5503, 0x07},// 0x;edge, 0xoffset2},
{0x5504, 0x0b},// 0x;2x, 0x, 0x--, 0xgain4x},
{0x5505, 0x24},// 0x;9x, 0x, 0x--, 0xgain2x},
{0x5506, 0x0e},// 0x;dns, 0xoffset1},
{0x5507, 0x25},// 0x;dns, 0xoffset2},
//{0x5508, 0x25},// 0x;bd_en,, 0xinter/bw, 0xoff},
{0x5509, 0x10},// 0x;2x, 0x, 0x--, 0xgain4x},
{0x550a, 0x24},// 0x;9x, 0x, 0x--, 0xgain2x},
//{0x550b, 0x02},
//{0x550c, 0x04},
{0x5804, 0x28},
{0x5809, 0x10},
{0x580a, 0x40},
{0x100, 0x01},
};
#elif defined(OV7676_OUTPUT_MODE_PACKET_1BIT)
__align(4) const SENSOR_REG_T OV7676_YUV_640X480[] = {
{0x103, 0x01},
//;5c, 0x01, 0xad},
//;5c, 0x02, 0xad},
{0x3001, 0x07},
{0x3002, 0xff},
{0x301e, 0x08},
{0x3080, 0x02},
{0x3081, 0x10},
{0x3082, 0x03},
{0x3083, 0x01},
{0x3084, 0x01},
{0x3103, 0x21},//01},
{0x3503, 0x00},
{0x3600, 0x03},
{0x3602, 0x0e},
{0x3612, 0x0d},
{0x3614, 0x53},
{0x37c0, 0x07},
{0x3800, 0x00},
{0x3801, 0x00},
{0x3802, 0x00},
{0x3803, 0x00},
{0x3804, 0x02},
{0x3805, 0x87},
{0x3806, 0x01},
{0x3807, 0xe7},
{0x3808, 0x02},
{0x3809, 0x80},
{0x380a, 0x01},
{0x380b, 0xe0},
{0x380c, 0x03},
{0x380d, 0x12},
{0x380e, 0x01},
{0x380f, 0xfd},
{0x3810, 0x00},
{0x3811, 0x04},
{0x3812, 0x00},
{0x3813, 0x04},
{0x3820, 0x10},
{0x3821, 0x00},
{0x3a06, 0x00},
{0x3a07, 0xa1},
{0x3a08, 0x00},
{0x3a09, 0x86},
{0x3a0e, 0x01},
{0x3a0f, 0xe3},
{0x3a10, 0x01},
{0x3a11, 0xfc},
{0x4008, 0x00},
{0x4009, 0x03},
{0x4011, 0xf0},
{0x4013, 0x05},
{0x4014, 0x05},
{0x4015, 0x05},
{0x4017, 0x08},
{0x4300, 0x03},
{0x4301, 0xfb},
{0x4304, 0x03},
{0x4305, 0xfb},
{0x4308, 0x04},
{0x4f00, 0x80},
{0x4f01, 0x90},//10},
{0x4f02, 0x80},//a0},
{0x5000, 0xff},
{0x5001, 0x3f},
{0x5002, 0xc8},
{0x5080, 0x00},
{0x5201, 0x05},
{0x5204, 0x00},
{0x5205, 0x14},
{0x5206, 0x00},
{0x5207, 0xfe},
{0x5208, 0x00},
{0x5209, 0x54},
{0x520a, 0x01},
{0x520b, 0x31},
{0x520c, 0x00},
{0x520d, 0x22},
{0x520e, 0x01},
{0x520f, 0xed},
{0x5210, 0x10},
{0x5211, 0x05},
{0x5228, 0x00},
{0x5229, 0x5f},
{0x522c, 0x01},
{0x522d, 0x22},
{0x522a, 0x00},
{0x522b, 0xe0},
{0x522e, 0x01},
{0x522f, 0x6e},
{0x5230, 0x70},
{0x550d, 0x00},// 0x;re-cursive, 0xoff},
{0x5500, 0x08},// 0x;2x, 0x, 0x--, 0xgain4x},
{0x5501, 0x12},// 0x;9x, 0x, 0x--, 0xgain2x},
{0x5502, 0x24},// 0x;edge, 0xoffset1},
{0x5503, 0x23},// 0x;edge, 0xoffset2},
{0x5504, 0x08},// 0x;2x, 0x, 0x--, 0xgain4x},
{0x5505, 0x12},// 0x;9x, 0x, 0x--, 0xgain2x},
{0x5506, 0x10},// 0x;dns, 0xoffset1},
{0x5507, 0x30},// 0x;dns, 0xoffset2},
{0x5508, 0x25},// 0x;bd_en,, 0xinter/bw, 0xoff},
{0x5509, 0x08},// 0x;2x, 0x, 0x--, 0xgain4x},
{0x550a, 0x12},// 0x;9x, 0x, 0x--, 0xgain2x},
{0x550b, 0x02},
{0x550c, 0x04},
{0x5804, 0x18},
{0x5809, 0x04},
{0x580a, 0x20},
{0x100, 0x01},
};
#elif defined(OV7676_OUTPUT_MODE_PACKET_2BIT)
__align(4) const SENSOR_REG_T OV7676_YUV_640X480[] = {
{0x103, 0x01},
//;5c, 0x01, 0xad},
//;5c, 0x02, 0xad},
{0x3001, 0x07},
{0x3002, 0xff},
{0x301e, 0x08},
{0x3080, 0x02},
{0x3081, 0x10},
{0x3082, 0x03},
{0x3083, 0x01},
{0x3084, 0x01},
{0x3103, 0x01},
{0x3503, 0x00},
{0x3600, 0x03},
{0x3602, 0x0e},
{0x3612, 0x0d},
{0x3614, 0x53},
{0x37c0, 0x07},
{0x3800, 0x00},
{0x3801, 0x00},
{0x3802, 0x00},
{0x3803, 0x00},
{0x3804, 0x02},
{0x3805, 0x87},
{0x3806, 0x01},
{0x3807, 0xe7},
{0x3808, 0x02},
{0x3809, 0x80},
{0x380a, 0x01},
{0x380b, 0xe0},
{0x380c, 0x03},
{0x380d, 0x12},
{0x380e, 0x01},
{0x380f, 0xfd},
{0x3810, 0x00},
{0x3811, 0x04},
{0x3812, 0x00},
{0x3813, 0x04},
{0x3820, 0x10},
{0x3821, 0x00},
{0x3a06, 0x00},
{0x3a07, 0xa1},
{0x3a08, 0x00},
{0x3a09, 0x86},
{0x3a0e, 0x01},
{0x3a0f, 0xe3},
{0x3a10, 0x01},
{0x3a11, 0xfc},
{0x4008, 0x00},
{0x4009, 0x03},
{0x4011, 0xf0},
{0x4013, 0x05},
{0x4014, 0x05},
{0x4015, 0x05},
{0x4017, 0x08},
{0x4300, 0x03},
{0x4301, 0xfb},
{0x4304, 0x03},
{0x4305, 0xfb},
{0x4308, 0x04},
{0x4f00, 0x80},
{0x4f01, 0x90},//;10},
{0x4f02, 0xa0},
{0x5000, 0xff},
{0x5001, 0x3f},
{0x5002, 0xc8},
{0x5080, 0x00},
{0x5201, 0x05},
{0x5204, 0x00},
{0x5205, 0x14},
{0x5206, 0x00},
{0x5207, 0xfe},
{0x5208, 0x00},
{0x5209, 0x54},
{0x520a, 0x01},
{0x520b, 0x31},
{0x520c, 0x00},
{0x520d, 0x22},
{0x520e, 0x01},
{0x520f, 0xed},
{0x5210, 0x10},
{0x5211, 0x05},
{0x5228, 0x00},
{0x5229, 0x5f},
{0x522c, 0x01},
{0x522d, 0x22},
{0x522a, 0x00},
{0x522b, 0xe0},
{0x522e, 0x01},
{0x522f, 0x6e},
{0x5230, 0x70},
{0x550d, 0x00},// 0x;re-cursive, 0xoff},
{0x5500, 0x08}, //0x;2x, 0x, 0x--, 0xgain4x},
{0x5501, 0x12}, //0x;9x, 0x, 0x--, 0xgain2x},
{0x5502, 0x24}, //0x;edge, 0xoffset1},
{0x5503, 0x23}, //0x;edge, 0xoffset2},
{0x5504, 0x08}, //0x;2x, 0x, 0x--, 0xgain4x},
{0x5505, 0x12}, //0x;9x, 0x, 0x--, 0xgain2x},
{0x5506, 0x10}, //0x;dns, 0xoffset1},
{0x5507, 0x30}, //0x;dns, 0xoffset2},
{0x5508, 0x25}, //0x;bd_en,, 0xinter/bw, 0xoff},
{0x5509, 0x08}, //0x;2x, 0x, 0x--, 0xgain4x},
{0x550a, 0x12}, //0x;9x, 0x, 0x--, 0xgain2x},
{0x550b, 0x02},
{0x550c, 0x04},
{0x5804, 0x18},
{0x5809, 0x04},
{0x580a, 0x20},
{0x100, 0x01},
};
#elif defined(OV7676_OUTPUT_MODE_PACKET_4BIT)
__align(4) const SENSOR_REG_T OV7676_YUV_640X480[] = {
{0x0103, 0x01},
{0x3001, 0x07},
{0x3002, 0xff},
{0x301e, 0x1e},
{0x3080, 0x02},
{0x3081, 0x10},
{0x3082, 0x03},
{0x3083, 0x01},
{0x3084, 0x01},
{0x3103, 0x02},
{0x3503, 0x00},
{0x3600, 0x03},
{0x3602, 0x0e},
{0x3612, 0x0d},
{0x3614, 0x53},
{0x37c0, 0x07},
{0x3800, 0x00},
{0x3801, 0x00},
{0x3802, 0x00},
{0x3803, 0x00},
{0x3804, 0x02},
{0x3805, 0x87},
{0x3806, 0x01},
{0x3807, 0xe7},
{0x3808, 0x02},
{0x3809, 0x80},
{0x380a, 0x01},
{0x380b, 0xe0},
{0x380c, 0x03},
{0x380d, 0x12},
{0x380e, 0x01},
{0x380f, 0xfd},
{0x3810, 0x00},
{0x3811, 0x04},
{0x3812, 0x00},
{0x3813, 0x04},
{0x3820, 0x10},
{0x3821, 0x00},
{0x3a06, 0x00},
{0x3a07, 0xa1},
{0x3a08, 0x00},
{0x3a09, 0x86},
{0x3a0e, 0x01},
{0x3a0f, 0xe3},
{0x3a10, 0x01},
{0x3a11, 0xfc},
{0x4008, 0x00},
{0x4009, 0x01},
{0x4011, 0xf0},
{0x4013, 0x05},
{0x4014, 0x05},
{0x4015, 0x05},
{0x4017, 0x08},
{0x4300, 0x03},
{0x4301, 0xff},
{0x4304, 0x03},
{0x4305, 0xff},
{0x4308, 0x04},
{0x4f00, 0x80},
{0x4f01, 0x10},
{0x4f02, 0xe0},
{0x5000, 0xff},
{0x5001, 0x3f},
{0x5002, 0xc8},
{0x5080, 0x00},
{0x5204, 0x03},
{0x5205, 0xbe},
{0x5206, 0x00},
{0x5207, 0x7a},
{0x5208, 0x03},
{0x5209, 0xe8},
{0x520a, 0x00},
{0x520b, 0x9a},
{0x5210, 0x02},
{0x5211, 0x02},
{0x5228, 0x03},
{0x5229, 0xe4},
{0x522c, 0x00},
{0x522d, 0x68},
{0x522a, 0x00},
{0x522b, 0x00},
{0x522e, 0x00},
{0x522f, 0x88},
{0x5230, 0x24},
{0x550d, 0x00},
{0x5500, 0x0b},
{0x5501, 0x1b},
{0x5502, 0x22},
{0x5503, 0x07},
{0x5504, 0x0b},
{0x5505, 0x24},
{0x5506, 0x0E},
{0x5507, 0x25},
{0x5509, 0x10},
{0x550a, 0x24},
{0x5804, 0x28},
{0x5809, 0x10},
{0x580a, 0x40},
{0x0100, 0x01},

};

#elif defined(OV7676_OUTPUT_MODE_PACKET_DDR_1BIT)
__align(4) const SENSOR_REG_T OV7676_YUV_640X480[] = {
{0x103, 0x01},
//;5c, 0x01, 0xad},
//;5c, 0x02, 0xad},
{0x3001, 0x07},
{0x3002, 0xff},
{0x301e, 0x08},
{0x3080, 0x02},
{0x3081, 0x10},
{0x3082, 0x03},
{0x3083, 0x01},
{0x3084, 0x01},
{0x3103, 0x21},//01},
{0x3503, 0x00},
{0x3600, 0x03},
{0x3602, 0x0e},
{0x3612, 0x0d},
{0x3614, 0x53},
{0x37c0, 0x07},
{0x3800, 0x00},
{0x3801, 0x00},
{0x3802, 0x00},
{0x3803, 0x00},
{0x3804, 0x02},
{0x3805, 0x87},
{0x3806, 0x01},
{0x3807, 0xe7},
{0x3808, 0x02},
{0x3809, 0x80},
{0x380a, 0x01},
{0x380b, 0xe0},
{0x380c, 0x03},
{0x380d, 0x12},
{0x380e, 0x01},
{0x380f, 0xfd},
{0x3810, 0x00},
{0x3811, 0x04},
{0x3812, 0x00},
{0x3813, 0x04},
{0x3820, 0x10},
{0x3821, 0x00},
{0x3a06, 0x00},
{0x3a07, 0xa1},
{0x3a08, 0x00},
{0x3a09, 0x86},
{0x3a0e, 0x01},
{0x3a0f, 0xe3},
{0x3a10, 0x01},
{0x3a11, 0xfc},
{0x4008, 0x00},
{0x4009, 0x03},
{0x4011, 0xf0},
{0x4013, 0x05},
{0x4014, 0x05},
{0x4015, 0x05},
{0x4017, 0x08},
{0x4300, 0x03},
{0x4301, 0xfb},
{0x4304, 0x03},
{0x4305, 0xfb},
{0x4308, 0x04},
{0x4f00, 0x80},
{0x4f01, 0x98},//10},
{0x4f02, 0x80},//a0},
{0x5000, 0xff},
{0x5001, 0x3f},
{0x5002, 0xc8},
{0x5080, 0x00},
{0x5201, 0x05},
{0x5204, 0x00},
{0x5205, 0x14},
{0x5206, 0x00},
{0x5207, 0xfe},
{0x5208, 0x00},
{0x5209, 0x54},
{0x520a, 0x01},
{0x520b, 0x31},
{0x520c, 0x00},
{0x520d, 0x22},
{0x520e, 0x01},
{0x520f, 0xed},
{0x5210, 0x10},
{0x5211, 0x05},
{0x5228, 0x00},
{0x5229, 0x5f},
{0x522c, 0x01},
{0x522d, 0x22},
{0x522a, 0x00},
{0x522b, 0xe0},
{0x522e, 0x01},
{0x522f, 0x6e},
{0x5230, 0x70},
{0x550d, 0x00},// 0x;re-cursive, 0xoff},
{0x5500, 0x08},// 0x;2x, 0x, 0x--, 0xgain4x},
{0x5501, 0x12},// 0x;9x, 0x, 0x--, 0xgain2x},
{0x5502, 0x24},// 0x;edge, 0xoffset1},
{0x5503, 0x23},// 0x;edge, 0xoffset2},
{0x5504, 0x08},// 0x;2x, 0x, 0x--, 0xgain4x},
{0x5505, 0x12},// 0x;9x, 0x, 0x--, 0xgain2x},
{0x5506, 0x10},// 0x;dns, 0xoffset1},
{0x5507, 0x30},// 0x;dns, 0xoffset2},
{0x5508, 0x25},// 0x;bd_en,, 0xinter/bw, 0xoff},
{0x5509, 0x08},// 0x;2x, 0x, 0x--, 0xgain4x},
{0x550a, 0x12},// 0x;9x, 0x, 0x--, 0xgain2x},
{0x550b, 0x02},
{0x550c, 0x04},
{0x5804, 0x18},
{0x5809, 0x04},
{0x580a, 0x20},
{0x100, 0x01},
};

#elif defined(OV7676_OUTPUT_MODE_PACKET_DDR_2BIT)
__align(4) const SENSOR_REG_T OV7676_YUV_640X480[] = 
{
{0x103, 0x01},
//;5c, 0x01, 0xad},
//;5c, 0x02, 0xad},
{0x3001, 0x07},
{0x3002, 0xff},
{0x301e, 0x08},
{0x3080, 0x02},
{0x3081, 0x10},
{0x3082, 0x03},
{0x3083, 0x01},
{0x3084, 0x01},
{0x3103, 0x01},
{0x3503, 0x00},
{0x3600, 0x03},
{0x3602, 0x0e},
{0x3612, 0x0d},
{0x3614, 0x53},
{0x37c0, 0x07},
{0x3800, 0x00},
{0x3801, 0x00},
{0x3802, 0x00},
{0x3803, 0x00},
{0x3804, 0x02},
{0x3805, 0x87},
{0x3806, 0x01},
{0x3807, 0xe7},
{0x3808, 0x02},
{0x3809, 0x80},
{0x380a, 0x01},
{0x380b, 0xe0},
{0x380c, 0x03},
{0x380d, 0x12},
{0x380e, 0x01},
{0x380f, 0xfd},
{0x3810, 0x00},
{0x3811, 0x04},
{0x3812, 0x00},
{0x3813, 0x04},
{0x3820, 0x10},
{0x3821, 0x00},
{0x3a06, 0x00},
{0x3a07, 0xa1},
{0x3a08, 0x00},
{0x3a09, 0x86},
{0x3a0e, 0x01},
{0x3a0f, 0xe3},
{0x3a10, 0x01},
{0x3a11, 0xfc},
{0x4008, 0x00},
{0x4009, 0x03},
{0x4011, 0xf0},
{0x4013, 0x05},
{0x4014, 0x05},
{0x4015, 0x05},
{0x4017, 0x08},
{0x4300, 0x03},
{0x4301, 0xfb},
{0x4304, 0x03},
{0x4305, 0xfb},
{0x4308, 0x04},
{0x4f00, 0x80},
{0x4f01, 0x98},//;10},
{0x4f02, 0xa0},
{0x5000, 0xff},
{0x5001, 0x3f},
{0x5002, 0xc8},
{0x5080, 0x00},
{0x5201, 0x05},
{0x5204, 0x00},
{0x5205, 0x14},
{0x5206, 0x00},
{0x5207, 0xfe},
{0x5208, 0x00},
{0x5209, 0x54},
{0x520a, 0x01},
{0x520b, 0x31},
{0x520c, 0x00},
{0x520d, 0x22},
{0x520e, 0x01},
{0x520f, 0xed},
{0x5210, 0x10},
{0x5211, 0x05},
{0x5228, 0x00},
{0x5229, 0x5f},
{0x522c, 0x01},
{0x522d, 0x22},
{0x522a, 0x00},
{0x522b, 0xe0},
{0x522e, 0x01},
{0x522f, 0x6e},
{0x5230, 0x70},
{0x550d, 0x00},// 0x;re-cursive, 0xoff},
{0x5500, 0x08}, //0x;2x, 0x, 0x--, 0xgain4x},
{0x5501, 0x12}, //0x;9x, 0x, 0x--, 0xgain2x},
{0x5502, 0x24}, //0x;edge, 0xoffset1},
{0x5503, 0x23}, //0x;edge, 0xoffset2},
{0x5504, 0x08}, //0x;2x, 0x, 0x--, 0xgain4x},
{0x5505, 0x12}, //0x;9x, 0x, 0x--, 0xgain2x},
{0x5506, 0x10}, //0x;dns, 0xoffset1},
{0x5507, 0x30}, //0x;dns, 0xoffset2},
{0x5508, 0x25}, //0x;bd_en,, 0xinter/bw, 0xoff},
{0x5509, 0x08}, //0x;2x, 0x, 0x--, 0xgain4x},
{0x550a, 0x12}, //0x;9x, 0x, 0x--, 0xgain2x},
{0x550b, 0x02},
{0x550c, 0x04},
{0x5804, 0x18},
{0x5809, 0x04},
{0x580a, 0x20},
{0x100, 0x01},
};
#elif defined(OV7676_OUTPUT_MODE_PACKET_DDR_4BIT)
__align(4) const SENSOR_REG_T OV7676_YUV_640X480[] = {
{0x0103, 0x01},
{0x3001, 0x07},
{0x3002, 0xff},
{0x301e, 0x1e},
{0x3080, 0x02},
{0x3081, 0x10},
{0x3082, 0x03},
{0x3083, 0x01},
{0x3084, 0x01},
{0x3103, 0x02},
{0x3503, 0x00},
{0x3600, 0x03},
{0x3602, 0x0e},
{0x3612, 0x0d},
{0x3614, 0x53},
{0x37c0, 0x07},
{0x3800, 0x00},
{0x3801, 0x00},
{0x3802, 0x00},
{0x3803, 0x00},
{0x3804, 0x02},
{0x3805, 0x87},
{0x3806, 0x01},
{0x3807, 0xe7},
{0x3808, 0x02},
{0x3809, 0x80},
{0x380a, 0x01},
{0x380b, 0xe0},
{0x380c, 0x03},
{0x380d, 0x12},
{0x380e, 0x01},
{0x380f, 0xfd},
{0x3810, 0x00},
{0x3811, 0x04},
{0x3812, 0x00},
{0x3813, 0x04},
{0x3820, 0x10},
{0x3821, 0x00},
{0x3a06, 0x00},
{0x3a07, 0xa1},
{0x3a08, 0x00},
{0x3a09, 0x86},
{0x3a0e, 0x01},
{0x3a0f, 0xe3},
{0x3a10, 0x01},
{0x3a11, 0xfc},
{0x4008, 0x00},
{0x4009, 0x01},
{0x4011, 0xf0},
{0x4013, 0x05},
{0x4014, 0x05},
{0x4015, 0x05},
{0x4017, 0x08},
{0x4300, 0x03},
{0x4301, 0xff},
{0x4304, 0x03},
{0x4305, 0xff},
{0x4308, 0x04},
{0x4f00, 0x80},
{0x4f01, 0x18},
{0x4f02, 0xe0},
{0x5000, 0xff},
{0x5001, 0x3f},
{0x5002, 0xc8},
{0x5080, 0x00},
{0x5204, 0x03},
{0x5205, 0xbe},
{0x5206, 0x00},
{0x5207, 0x7a},
{0x5208, 0x03},
{0x5209, 0xe8},
{0x520a, 0x00},
{0x520b, 0x9a},
{0x5210, 0x02},
{0x5211, 0x02},
{0x5228, 0x03},
{0x5229, 0xe4},
{0x522c, 0x00},
{0x522d, 0x68},
{0x522a, 0x00},
{0x522b, 0x00},
{0x522e, 0x00},
{0x522f, 0x88},
{0x5230, 0x24},
{0x550d, 0x00},
{0x5500, 0x0b},
{0x5501, 0x1b},
{0x5502, 0x22},
{0x5503, 0x07},
{0x5504, 0x0b},
{0x5505, 0x24},
{0x5506, 0x0E},
{0x5507, 0x25},
{0x5509, 0x10},
{0x550a, 0x24},
{0x5804, 0x28},
{0x5809, 0x10},
{0x580a, 0x40},
{0x0100, 0x01},
};
#elif defined(OV7676_OUTPUT_MODE_OV_SPI_1BIT)
__align(4) const SENSOR_REG_T OV7676_YUV_640X480[] = {
{0x0103, 0x01},
//{0x0001, 0xad},
//{0x0002, 0xad},
{0x3001, 0x07},
{0x3002, 0xff},
{0x301e, 0x08},
{0x3080, 0x00},
{0x3081, 0x10},
{0x3082, 0x07},
{0x3083, 0x01},
{0x3084, 0x01},
{0x3103, 0x21},
{0x3503, 0x00},
{0x3600, 0x03},
{0x3602, 0x0e},
{0x3612, 0x0d},
{0x3614, 0x53},
{0x37c0, 0x07},
{0x3800, 0x00},
{0x3801, 0x00},
{0x3802, 0x00},
{0x3803, 0x00},
{0x3804, 0x02},
{0x3805, 0x87},
{0x3806, 0x01},
{0x3807, 0xe7},
{0x3808, 0x02},
{0x3809, 0x80},
{0x380a, 0x01},
{0x380b, 0xe0},
{0x380c, 0x03},
{0x380d, 0x12},
{0x380e, 0x01},
{0x380f, 0xfc},
{0x3810, 0x00},
{0x3811, 0x04},
{0x3812, 0x00},
{0x3813, 0x04},
{0x3820, 0x10},
{0x3821, 0x00},
{0x3a06, 0x00},
{0x3a07, 0xa1},
{0x3a08, 0x00},
{0x3a09, 0x86},
{0x3a0e, 0x01},
{0x3a0f, 0xe3},
{0x3a10, 0x01},
{0x3a11, 0xfc},
{0x4008, 0x00},
{0x4009, 0x01},
{0x4011, 0xf0},
{0x4013, 0x05},
{0x4014, 0x05},
{0x4015, 0x05},
{0x4017, 0x08},
{0x4300, 0x03},
{0x4301, 0xfb},
{0x4304, 0x03},
{0x4305, 0xfb},
{0x4308, 0x04},
{0x4f00, 0x80},
{0x4f01, 0x15},
{0x4f02, 0x80}, // 0x80
{0x5000, 0xff},
{0x5001, 0x3f},
{0x5002, 0xc8},
{0x5080, 0x00},
{0x5204, 0x03},
{0x5205, 0xbe},
{0x5206, 0x00},
{0x5207, 0x7a},
{0x5208, 0x03},
{0x5209, 0xe8},
{0x520a, 0x00},
{0x520b, 0x9a},
{0x5210, 0x02},
{0x5211, 0x02},
{0x5228, 0x03},
{0x5229, 0xe4},
{0x522c, 0x00},
{0x522d, 0x68},
{0x522a, 0x00},
{0x522b, 0x00},
{0x522e, 0x00},
{0x522f, 0x88},
{0x5230, 0x24},
{0x550d, 0x00},
{0x5500, 0x10},
{0x5501, 0x24},
{0x5502, 0x22},
{0x5503, 0x07},
{0x5504, 0x10},
{0x5505, 0x24},
{0x5506, 0x04},
{0x5507, 0x16},
{0x5509, 0x10},
{0x550a, 0x24},
{0x5804, 0x28},
{0x5809, 0x10},
{0x580a, 0x40},
{0x0100, 0x01},
//{0x0107, 0x04},
};
#elif defined(OV7676_OUTPUT_MODE_OV_SPI_2BIT)
__align(4) const SENSOR_REG_T OV7676_YUV_640X480[] = {
{0x0103, 0x01},
//5c, 0x0001, 0xad},
//5c, 0x0002, 0xad},
{0x3001, 0x07},
{0x3002, 0xff},
{0x301e, 0x08},
{0x3080, 0x02},// 0x;00},
{0x3081, 0x10},
{0x3082, 0x07},
{0x3083, 0x01},
{0x3084, 0x01},
{0x3103, 0x01},// 0x;21},
{0x3503, 0x00},
{0x3600, 0x03},
{0x3602, 0x0e},
{0x3612, 0x0d},
{0x3614, 0x53},
{0x37c0, 0x07},
{0x3800, 0x00},
{0x3801, 0x00},
{0x3802, 0x00},
{0x3803, 0x00},
{0x3804, 0x02},
{0x3805, 0x87},
{0x3806, 0x01},
{0x3807, 0xe7},
{0x3808, 0x02},
{0x3809, 0x80},
{0x380a, 0x01},
{0x380b, 0xe0},
{0x380c, 0x03},
{0x380d, 0x12},
{0x380e, 0x01},
{0x380f, 0xfc},
{0x3810, 0x00},
{0x3811, 0x04},
{0x3812, 0x00},
{0x3813, 0x04},
{0x3820, 0x10},
{0x3821, 0x00},
{0x3a06, 0x00},
{0x3a07, 0xa1},
{0x3a08, 0x00},
{0x3a09, 0x86},
{0x3a0e, 0x01},
{0x3a0f, 0xe3},
{0x3a10, 0x01},
{0x3a11, 0xfc},
{0x4008, 0x00},
{0x4009, 0x01},
{0x4011, 0xf0},
{0x4013, 0x05},
{0x4014, 0x05},
{0x4015, 0x05},
{0x4017, 0x08},
{0x4300, 0x03},
{0x4301, 0xfb},
{0x4304, 0x03},
{0x4305, 0xfb},
{0x4308, 0x04},
{0x4f00, 0x80},
{0x4f01, 0x15},
{0x4f02, 0xa0},// 0x;80},
{0x5000, 0xff},
{0x5001, 0x3f},
{0x5002, 0xc8},
{0x5080, 0x00},
{0x5204, 0x03},
{0x5205, 0xbe},
{0x5206, 0x00},
{0x5207, 0x7a},
{0x5208, 0x03},
{0x5209, 0xe8},
{0x520a, 0x00},
{0x520b, 0x9a},
{0x5210, 0x02},
{0x5211, 0x02},
{0x5228, 0x03},
{0x5229, 0xe4},
{0x522c, 0x00},
{0x522d, 0x68},
{0x522a, 0x00},
{0x522b, 0x00},
{0x522e, 0x00},
{0x522f, 0x88},
{0x5230, 0x24},
{0x550d, 0x00},
{0x5500, 0x10},
{0x5501, 0x24},
{0x5502, 0x22},
{0x5503, 0x07},
{0x5504, 0x10},
{0x5505, 0x24},
{0x5506, 0x04},
{0x5507, 0x16},
{0x5509, 0x10},
{0x550a, 0x24},
{0x5804, 0x28},
{0x5809, 0x10},
{0x580a, 0x40},
{0x0100, 0x01},
};
#endif

LOCAL SENSOR_REG_TAB_INFO_T s_OV7676_resolution_Tab_YUV[]=
{   
    { ADDR_AND_LEN_OF_ARRAY(OV7676_YUV_640X480), 640, 480,  24, SENSOR_IMAGE_FORMAT_YUV422 },
    // YUV422 PREVIEW 1
    { PNULL,                    0,   640,    480,    24   ,   SENSOR_IMAGE_FORMAT_YUV422},
    { PNULL,                    0,      0,  0  ,        0,        0      },   
    { PNULL,                    0,      0,  0  ,        0,        0      },   
    { PNULL,                    0,      0,  0  ,        0,        0      },   
    

    // YUV422 PREVIEW 2 
     { PNULL,                   0,      0,  0 ,         0,         0     }, 
     { PNULL,                   0,      0,  0  ,        0,        0      },   
     { PNULL,                   0,      0,  0  ,        0,        0      },   
     { PNULL,                   0,      0,  0  ,        0,        0      }

};

LOCAL SENSOR_IOCTL_FUNC_TAB_T s_OV7676_ioctl_func_tab = 
{
// Internal 
    PNULL,
    OV7676_Power_On, 
    PNULL,
    OV7676_Identify,
    PNULL,
    PNULL,
// Custom function
    PNULL,
    PNULL,

// External
    PNULL, 
    PNULL, //OV7676_Set_Mirror,
    PNULL, //OV7676_Set_Flip,

    OV7676_Set_Brightness,
    OV7676_Set_Contrast,
    PNULL, //OV7676_Set_Sharpness,
    PNULL, //OV7676_Set_saturation,
    OV7676_Set_Preview_Mode, 

    OV7676_Set_Image_Effect, 
    PNULL,//OV7676_Before_Snapshot,
    PNULL,//OV7676_After_Snapshot,

    PNULL,

    PNULL,
    PNULL,
    PNULL,
    PNULL,
    PNULL,
    PNULL,

    PNULL,
    PNULL,

    OV7676_Set_AWB,

    PNULL,

    PNULL, 
    OV7676_Set_Ev,

    PNULL, 
    PNULL, 
    PNULL,

    PNULL,
    PNULL,
    OV7676_Set_Anti_Flicker,
    OV7676_Set_Video_Mode,

    PNULL,
    PNULL
};

/**---------------------------------------------------------------------------*
 **                         Global Variables                                  *
 **---------------------------------------------------------------------------*/
PUBLIC const SENSOR_INFO_T g_OV7676_yuv_info =
{
    OV7676_I2C_ADDR_W,              // salve i2c write address
    OV7676_I2C_ADDR_R,              // salve i2c read address
    
    SENSOR_I2C_REG_16BIT | SENSOR_I2C_VAL_8BIT | SENSOR_I2C_FREQ_400,								// bit0: 0: i2c register value is 8 bit, 1: i2c register value is 16 bit
    								// bit0: 0: i2c register value is 8 bit, 1: i2c register value is 16 bit
                                    // bit2: 0: i2c register addr  is 8 bit, 1: i2c register addr  is 16 bit
                                    // other bit: reseved
    SENSOR_HW_SIGNAL_PCLK_P|\
    SENSOR_HW_SIGNAL_VSYNC_N|\
    SENSOR_HW_SIGNAL_HSYNC_P,       // bit0: 0:negative; 1:positive -> polarily of pixel clock
                                    // bit2: 0:negative; 1:positive -> polarily of horizontal synchronization signal
                                    // bit4: 0:negative; 1:positive -> polarily of vertical synchronization signal
                                    // other bit: reseved                                           

    // preview mode
    SENSOR_ENVIROMENT_NORMAL|\
    SENSOR_ENVIROMENT_NIGHT|\
    SENSOR_ENVIROMENT_SUNNY,        
    
    // image effect
    SENSOR_IMAGE_EFFECT_NORMAL|\
    SENSOR_IMAGE_EFFECT_BLACKWHITE|\
    SENSOR_IMAGE_EFFECT_RED|\
    SENSOR_IMAGE_EFFECT_GREEN|\
    SENSOR_IMAGE_EFFECT_BLUE|\
    SENSOR_IMAGE_EFFECT_YELLOW|\
    SENSOR_IMAGE_EFFECT_NEGATIVE|\
    SENSOR_IMAGE_EFFECT_CANVAS,
    
    // while balance mode
    0,
        
    7,                              // bit[0:7]: count of step in brightness, contrast, sharpness, saturation
                                    // bit[8:31] reseved
    
    SENSOR_LOW_PULSE_RESET,         // reset pulse level
    100,                            // reset pulse width(ms)
    
    SENSOR_LOW_LEVEL_PWDN,          // 1: high level valid; 0: low level valid
    
    2,                              // count of identify code 
    0x300A, 0x76,                   // supply two code to identify sensor.
    0x300B, 0x76,                   // for Example: index = 0-> Device id, index = 1 -> version id                                          
                                            
    SENSOR_AVDD_2800MV,             // voltage of avdd  
    
    640,                            // max width of source image
    480,                            // max height of source image
    "OV7676",                       // name of sensor                                               

    SENSOR_IMAGE_FORMAT_YUV422,     // define in SENSOR_IMAGE_FORMAT_E enum,
                                    // if set to SENSOR_IMAGE_FORMAT_MAX here, image format depent on SENSOR_REG_TAB_INFO_T
    SENSOR_IMAGE_PATTERN_YUV422_YUYV,   // pattern of input image form sensor;          

    s_OV7676_resolution_Tab_YUV,    // point to resolution table information structure
    &s_OV7676_ioctl_func_tab,       // point to ioctl function table
            
    PNULL,                          // information and table about Rawrgb sensor
    PNULL,                          // extend information about sensor  
    SENSOR_AVDD_1800MV,                     // iovdd
    SENSOR_AVDD_1800MV,                      // dvdd
    4,                     // skip frame num before preview 
    3,                     // skip frame num before capture     
    0,                     // deci frame num during preview;        
    2,                     // deci frame num during video preview;
    0,                     // threshold enable
    0,                     // threshold mode
    0,                     // threshold start postion   
    0,                     // threshold end postion 
#ifdef OV7676_OUTPUT_MODE_PACKET_1BIT
    SENSOR_OUTPUT_MODE_PACKET_1BIT, 
#elif defined(OV7676_OUTPUT_MODE_PACKET_2BIT)
    SENSOR_OUTPUT_MODE_PACKET_2BIT, 
#elif defined(OV7676_OUTPUT_MODE_PACKET_4BIT)
    SENSOR_OUTPUT_MODE_PACKET_4BIT, 
#elif defined(OV7676_OUTPUT_MODE_PACKET_DDR_1BIT)
    SENSOR_OUTPUT_MODE_PACKET_DDR_1BIT, 
#elif defined(OV7676_OUTPUT_MODE_PACKET_DDR_2BIT)
    SENSOR_OUTPUT_MODE_PACKET_DDR_2BIT, 
#elif defined(OV7676_OUTPUT_MODE_PACKET_DDR_4BIT)
    SENSOR_OUTPUT_MODE_PACKET_DDR_4BIT,
#elif defined(OV7676_OUTPUT_MODE_OV_SPI_1BIT)
    SENSOR_OUTPUT_MODE_OV_SPI_1BIT,
#elif defined(OV7676_OUTPUT_MODE_OV_SPI_2BIT)
    SENSOR_OUTPUT_MODE_OV_SPI_2BIT,
#else
    SENSOR_OUTPUT_MODE_CCIR601_8BIT, 
#endif
    SENSOR_OUTPUT_ENDIAN_LITTLE
};

/**---------------------------------------------------------------------------*
 **                             Function  Definitions
 **---------------------------------------------------------------------------*/
LOCAL void OV7676_Write_Group_Regs( SENSOR_REG_T* sensor_reg_ptr )
{
    uint32 i;
    
    for(i = 0; (0xFFFF != sensor_reg_ptr[i].reg_addr) || (0xFF != sensor_reg_ptr[i].reg_value) ; i++)
    {
        Sensor_WriteReg(sensor_reg_ptr[i].reg_addr, sensor_reg_ptr[i].reg_value);
    }

}

LOCAL uint32 OV7676_Power_On(uint32 power_on)
{
    SENSOR_AVDD_VAL_E dvdd_val=g_OV7676_yuv_info.dvdd_val;
    SENSOR_AVDD_VAL_E avdd_val=g_OV7676_yuv_info.avdd_val;
    SENSOR_AVDD_VAL_E iovdd_val=g_OV7676_yuv_info.iovdd_val;  
    uint32 power_down = g_OV7676_yuv_info.power_down_level;
    
    if(SCI_TRUE == power_on)
    {
            Sensor_SetVoltage(dvdd_val, avdd_val, iovdd_val);
	     SCI_Sleep(2);
            GPIO_SetSensorPwdn(power_down); /*lint !e730 -e730*/
            SCI_Sleep(2);
            GPIO_SetSensorPwdn(!power_down);
	     SCI_Sleep(2);
            Sensor_SetMCLK(SENSOR_DEFALUT_MCLK);// Default MCLK=12Mhz
	     SCI_Sleep(2);
    }
    else
    {
            Sensor_SetMCLK(SENSOR_DISABLE_MCLK);
            SCI_Sleep(2);
            GPIO_SetSensorPwdn(power_down);
            SCI_Sleep(2);     
            Sensor_SetVoltage(SENSOR_AVDD_CLOSED, SENSOR_AVDD_CLOSED, SENSOR_AVDD_CLOSED);
            SCI_Sleep(2);
    }
    
    //SCI_TRACE_LOW("SENSOR: _OV7676_On(1:on, 0:off): %d", power_on);    
    
    return SCI_SUCCESS;
}

LOCAL uint32 OV7676_Identify(uint32 param)
{
    uint16 reg[2] = {0x300A, 0x300B};
    uint8 value[2] = {0x76, 0x76};
    uint8 ret = 0;
    uint8 err_cnt = 0;
    uint32 i = 0;
    uint32 nLoop = 1000;
    
    for(i = 0; i<2; )
    {
        nLoop = 1000;
        ret = Sensor_ReadReg(reg[i]);    
        
     	SCI_TRACE_LOW("SENSOR: OV7676 Read reg0x00 = %x");
        
        if( ret != value[i])
        {
            err_cnt++;
            if(err_cnt>3)
            {
                 SCI_TRACE_LOW("OV7676 identify Fail");
                 return SCI_ERROR;
            }
            else
            {
                while(nLoop--)
                {
                    ;
                }
                continue;
            }
        }
        err_cnt = 0;
        i++;
    }

    SCI_TRACE_LOW("OV7676 Identify ok");

    return (uint32)SCI_SUCCESS;
}

__align(4) const SENSOR_REG_T OV7676_brightness_tab[][3]=
{
	{{0x5807, 0x30},{0x5808,0x08},{0xffff,0xff}},
	{{0x5807, 0x20},{0x5808,0x08},{0xffff,0xff}},
	{{0x5807, 0x10},{0x5808,0x08},{0xffff,0xff}},
	{{0x5807, 0x00},{0x5808,0x00},{0xffff,0xff}},
	{{0x5807, 0x10},{0x5808,0x00},{0xffff,0xff}},
	{{0x5807, 0x20},{0x5808,0x00},{0xffff,0xff}},
	{{0x5807, 0x30},{0x5808,0x00},{0xffff,0xff}},
};

LOCAL uint32 OV7676_Set_Brightness(uint32 level)
{

    SENSOR_REG_T* sensor_reg_ptr = (SENSOR_REG_T*)OV7676_brightness_tab[level];

    SCI_ASSERT(PNULL != sensor_reg_ptr);   /*assert verified*/ 
    
    OV7676_Write_Group_Regs(sensor_reg_ptr);
    
    SCI_TRACE_LOW("OV7676_Set_Brightness: level = %d");
    
    return 0;
}

__align(4) const SENSOR_REG_T OV7676_contrast_tab[][3]=
{
	{{0x5807, 0x30},{0x5808,0x08},{0xffff,0xff}},
	{{0x5807, 0x20},{0x5808,0x08},{0xffff,0xff}},
	{{0x5807, 0x10},{0x5808,0x08},{0xffff,0xff}},
	{{0x5807, 0x00},{0x5808,0x00},{0xffff,0xff}},
	{{0x5807, 0x10},{0x5808,0x00},{0xffff,0xff}},
	{{0x5807, 0x20},{0x5808,0x00},{0xffff,0xff}},
	{{0x5807, 0x30},{0x5808,0x00},{0xffff,0xff}},
};

LOCAL uint32 OV7676_Set_Contrast(uint32 level)
{
 
    SENSOR_REG_T* sensor_reg_ptr = (SENSOR_REG_T*)OV7676_contrast_tab[level];

    SCI_ASSERT(PNULL != sensor_reg_ptr);    /*assert verified*/ 
    
    OV7676_Write_Group_Regs(sensor_reg_ptr);
    
    SCI_TRACE_LOW("OV7676_Set_Contrast: level = %d");
    
    return 0;
}

__align(4) const SENSOR_REG_T OV7676_image_effect_tab[][5]= 
{
    // effect normal
    {
        {0x5001, 0x3f},{0x5800, 0x02},{0x5803, 0x50},{0xffff, 0xff}
    },
    //effect BLACKWHITE
    {
        {0x5001, 0x3f},{0x5800, 0x22},{0xffff, 0xff}
    },
    // effect RED
    {                                                                                                     						    
        {0x5001, 0x3f},{0x5800, 0x1a},{0x5803, 0x30},{0x5804, 0xb0},{0xffff,0xff}                                              						
    },                                                                                                    						
    // effect GREEN                                                                                       						CamWriteCmosSensor(0x5804,0x80);//60
    {
        {0x5001, 0x3f},{0x5800, 0x1a},{0x5803, 0x80},{0x5804, 0x80},{0xffff,0xff}
    },
    // effect  BLUE
    {
        {0x5001, 0x3f},{0x5800, 0x1a},{0x5803, 0xb0},{0x5804, 0x30},{0xffff,0xff}
    },
    // effect  YELLOW
    {
        {0x5001, 0x3f},{0x5800, 0x1a},{0x5803, 0x40},{0x5804, 0xa0},{0xffff,0xff}
    },  
    // effect NEGATIVE
    {	     
        {0x5001, 0x3f},{0x5800, 0x42},{0xffff, 0xff}
    },    
    //effect ANTIQUE
    {
        {0x5001, 0x3f},{0x5800, 0x1a},{0x5803, 0x40},{0x5804, 0xa0},{0xffff,0xff}
    },
};

LOCAL uint32 OV7676_Set_Image_Effect(uint32 effect_type)
{
   
    SENSOR_REG_T* sensor_reg_ptr = (SENSOR_REG_T*)OV7676_image_effect_tab[effect_type];

    SCI_ASSERT(PNULL != sensor_reg_ptr);    /*assert verified*/ 

    OV7676_Write_Group_Regs(sensor_reg_ptr);
    
    SCI_TRACE_LOW("OV7676_Set_Image_Effect: effect_type = %d");
    
    return 0;
}

__align(4) const SENSOR_REG_T OV7676_ev_tab[][4]=
{   
    {{0x3a03, 0x1a}, {0x3a04, 0x10}, {0xffff, 0xff}},            
    {{0x3a03, 0x22}, {0x3a04, 0x18}, {0xffff, 0xff}},            
    {{0x3a03, 0x2a}, {0x3a04, 0x20}, {0xffff, 0xff}},            
    {{0x3a03, 0x34}, {0x3a04, 0x2d}, {0xffff, 0xff}},            
    {{0x3a03, 0x4a}, {0x3a04, 0x40}, {0xffff, 0xff}},            
    {{0x3a03, 0x63}, {0x3a04, 0x58}, {0xffff, 0xff}},
    {{0x3a03, 0x6a}, {0x3a04, 0x60}, {0xffff, 0xff}}   
};

LOCAL uint32 OV7676_Set_Ev(uint32 level)
{

    SENSOR_REG_T* sensor_reg_ptr = (SENSOR_REG_T*)OV7676_ev_tab[level];

    SCI_ASSERT(PNULL != sensor_reg_ptr);    /*assert verified*/ 
    SCI_ASSERT(level < 7);    /*assert verified*/ 
 
    OV7676_Write_Group_Regs(sensor_reg_ptr );

    SCI_TRACE_LOW("OV7676_Set_Ev: level = %d");

    return 0;
}

LOCAL uint32 OV7676_Set_Anti_Flicker(uint32 mode)
{ 
    switch(mode)
    {
		case DCAMERA_FLICKER_50HZ:

		break;

		case DCAMERA_FLICKER_60HZ:

		break;

		default:
		break;
    }
      
    SCI_TRACE_LOW("OV7676_Set_Anti_Flicker-mode=%d");
    
    return 0;
}

LOCAL uint32 OV7676_Set_Preview_Mode(uint32 preview_mode)
{
    switch (preview_mode)
    {
        case DCAMERA_ENVIRONMENT_NORMAL: 
        {
            break;
        }
        case DCAMERA_ENVIRONMENT_NIGHT:
        {
            break;
        }
        default:
        {
            break;
        }
        
    }
	SCI_TRACE_LOW("OV7676_Set_Preview_Mode: level = %d");
	return 0;
}

__align(4) const SENSOR_REG_T OV7676_awb_tab[][8]=
{
    //AUTO
    {
        {0x5200, 0x14},
        {0xffff, 0xff},
        {0xffff, 0xff},
        {0xffff, 0xff},
        {0xffff, 0xff},
        {0xffff, 0xff},
        {0xffff, 0xff}            
    },    
    //INCANDESCENCE:
    {
        {0x5200, 0x1c},           			 			
        {0x521a, 0x04},           			 			
        {0x521b, 0xe0},           			 			
        {0x521c, 0x04},           			 			
        {0x521d, 0x00},           			 			
        {0x521e, 0x05},           			 			
        {0x521f, 0xa0},           			
        {0xffff, 0xff}             			
    },
    //U30
    {

        {0xffff, 0xff}            
    },  
    //CWF
    {

        {0xffff, 0xff}             
    },    
    //FLUORESCENT:
    {
        {0x5200, 0x1c},         			  			
        {0x521a, 0x05},         			  			
        {0x521b, 0x48},         			  			
        {0x521c, 0x04},         			  			
        {0x521d, 0x00},         			  			
        {0x521e, 0x05},         			  			
        {0x521f, 0xe0},         			
        {0xffff, 0xff}            
    },
    //SUN:
    {
        {0x5200, 0x1c},            						
        {0x521a, 0x06},            						
        {0x521b, 0x10},            						
        {0x521c, 0x04},            						
        {0x521d, 0x00},            						
        {0x521e, 0x04},            						
        {0x521f, 0x48},                     			
        {0xffff, 0xff}             
    },
    //CLOUD:
    {
        {0x5200, 0x1c},            						
        {0x521a, 0x06},            						
        {0x521b, 0x30},            						
        {0x521c, 0x04},            						
        {0x521d, 0x00},            						
        {0x521e, 0x04},            						
        {0x521f, 0x30},             			
        {0xffff, 0xff}             
    },
};

LOCAL uint32 OV7676_Set_AWB(uint32 mode)
{
    
    SENSOR_REG_T* sensor_reg_ptr = (SENSOR_REG_T*)OV7676_awb_tab[mode];

    SCI_ASSERT(mode < 7);    /*assert verified*/ 
    SCI_ASSERT(PNULL != sensor_reg_ptr);    /*assert verified*/ 
    
    OV7676_Write_Group_Regs(sensor_reg_ptr);
    
    SCI_TRACE_LOW("OV7676_Set_AWB: mode = %d");
    
    return 0;
}

__align(4) const SENSOR_REG_T OV7676_video_mode_nor_tab[][2]=
{
    // normal mode 
    {{0x3a00 , 0x47}, {0xffff , 0xff}},    
    //vodeo mode
    {{0x3a00 , 0x41}, {0xffff , 0xff}},    
    // UPCC  mode
    {{0x3a00 , 0x41}, {0xffff , 0xff}},    
};    

LOCAL uint32 OV7676_Set_Video_Mode(uint32 mode)
{
    SENSOR_REG_T* sensor_reg_ptr = (SENSOR_REG_T*)OV7676_video_mode_nor_tab[mode];

    if(PNULL == sensor_reg_ptr||mode > DCAMERA_MODE_MAX)
    {
        return SCI_ERROR;
    }

    OV7676_Write_Group_Regs(sensor_reg_ptr );

    SCI_TRACE_LOW("OV7676_Set_Video_Mode =%d");

    return 0;
}

LOCAL uint32 OV7676_Before_Snapshot(uint32 para)
{

    return 0;
}

LOCAL uint32 OV7676_After_Snapshot(uint32 para)
{

    return 0;
}

/*lint -restore */

/**---------------------------------------------------------------------------------------------*
 **                         Compiler Flag                                                       *
 **---------------------------------------------------------------------------------------------*/
#ifdef   __cplusplus
    }
#endif

#endif
