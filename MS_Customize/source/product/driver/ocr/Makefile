#
# Makefile for evaluation
#
#############################################################################
# Makefile for building: ocr_arm.a
# Generated by manual Nov. 1 2007
# Project: ocr_arm.mcp
# Template: lib
#############################################################################
include ../../../../common.mak


#如果在子模块目录下进行单独编译，下面的MODULE_OPT需要手工完成，其内容保持和总控makefile中的MODULE_OPT一致
PRIVATE_OPT   = -Wb

#需要链接的库文件
LIBS = -l../../../../TH_Embeded_OCR.a

#include files path
INCPATH    = -I./inc -I../../../../MS_Include/common -I../../../../MS_Include/rtos

####### Files
VPATH         = src
SOURCES       = ocr_driver.c thocr_lib.c

OBJECTS       = ocr_driver.o thocr_lib.o

TARGET        = ../../../../build/lib/ocr_arm.a

all: $(OBJECTS)
	$(AR) $(ARFLAGS) $(TARGET) $(OBJECTS) $(LIBS)

.c.o:
ifeq "$(ARMCC)" "armcc"
	$(ARMCC) $(CFLAGS) $(PRIVATE_OPT) $(MODULE_OPT) -c $(INCPATH) $< -o $@
else
	$(CC) $(CFLAGS) $(PRIVATE_OPT) $(MODULE_OPT) -c $(INCPATH) $< -o $@
endif

.PHONY:clean
clean:
	$(DEL_FILE) *.o $(TARGET)

.PHONEY:install
install:
	@if [ -d ../../../../build ]; then \
	else \
		mkdir ../../../../build; \
		echo create build directory ...; \
	fi

	@if [ -d ../../../../build/lib ]; then \
	else \
		mkdir ../../../../build/lib -p; \
		echo create build/lib directory ...; \
	fi

	@if [ -d ../../../../build/obj ]; then \
	else \
		mkdir ../../../../build/obj -p; \
		echo create build/obj directory ...; \
	fi

	$(INSTALL_FILE) *.o ../../../../build/obj
#	$(INSTALL_FILE) *.a ../../../../build/lib
